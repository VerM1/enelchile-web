angular.module("UsageModule",["CoreModule","ngRoute"]),angular.module("UsageModule").controller("usageCtrl",["$scope","$state","$stateParams","$route","$window","$ionicSlideBoxDelegate","UsageService","$rootScope","$log","$ionicModal","$ionicLoading","DataMapService","PopupService","AccessService","PopupService","$q","AnalyticsService","UtilsService","LocalStorageProvider","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l,d,m,u,g,u,f,p,E,_,S){e.orientation,e.selectedTab=0,e.tab0selected=!0,e.tab1selected=!1,e.tab2selected=!1,e.tab3selected=!1,e.selectedIdex=0,e.flagChangeTab=0,e.tabAnt="Resumen - Resumen",e.sendAnalytics=function(e,o){p.evento(e,o)},e.changeTab=function(o){switch(!0===e.tab0selected?e.tabAnt="Resumen - Resumen":!0===e.tab1selected?e.tabAnt="Resumen - Consumos":!0===e.tab2selected?e.tabAnt="Resumen - Boleta":!0===e.tab3selected?e.tabAnt="Resumen - Pagos":e.tabAnt="Resumen - Resumen",c.debug("changetab"),e.tab0selected=!1,e.tab1selected=!1,e.tab2selected=!1,e.tab3selected=!1,o){case 0:i.tabActualAnalytics="Resumen - Resumen",e.tab0selected=!0,v(e.selectedIdex);break;case 1:p.evento(e.tabAnt,"Presionar Consumos)"),i.tabActualAnalytics="Resumen - Consumos",e.tab1selected=!0,h(e.selectedIdex);break;case 2:p.evento(e.tabAnt,"Presionar Boletas"),i.tabActualAnalytics="Resumen - Boletas",e.tab2selected=!0,T(e.selectedIdex);break;case 3:p.evento(e.tabAnt,"Presionar Pagos"),i.tabActualAnalytics="Resumen - Pagos",e.tab3selected=!0,L(e.selectedIdex);break;default:p.evento(e.tabAnt,"Presionar Resumen (superior)"),i.tabActualAnalytics="Resumen - Resumen",e.tab0selected=!0,e.selectedIdex=0,v(e.selectedIdex)}e.selectedTab=o},e.dataUsageAssetList={},e.dataUsageAssetList.items=[];var A=function(){f.defer();d.show({template:S.STYLE_IONICLOADING_TEMPLATE}),E.getAssetList().then(function(o){if(o.length>0)e.dataUsageAssetList.items=o,d.hide(),e.changeTab(0);else{c.error("No data"),d.hide();var t=i.translation.ERROR_MODAL_TITLE,a=i.translation.NO_DATA;u.openModal("error",t,a,e)}},function(o){c.error("Error AssetList: ",o),d.hide();var t=i.translation.ERROR_MODAL_TITLE,a=o.message;u.openModal("error",t,a,e)})};e.dataUsageAssetDetail={};var v=function(o){if(d.show({template:S.STYLE_IONICLOADING_TEMPLATE}),e.dataUsageAssetList.items.length>0){var t=e.dataUsageAssetList.items[o].numeroSuministro;d.show({template:S.STYLE_IONICLOADING_TEMPLATE}),n.getAssetDetail(t,o).then(function(o){c.info("reponse detalle: ",o),e.dataUsageAssetDetail=o,s.update(),d.hide()},function(o){c.error("Error AssetDetail: ",o),d.hide();var t=i.translation.ERROR_MODAL_TITLE,a=o.message;u.openModal("error",t,a,e)})}else{c.error("No data details with that AssetId"),d.hide();var a=i.translation.ERROR_MODAL_TITLE,r=i.translation.NO_DATA;u.openModal("error",a,r,e)}};e.dataUsageAssetUsage={},e.dataUsageAssetUsage.items=[],e.dataUsageAssetUsage.graphlabels=[],e.dataUsageAssetUsage.graphdata=[],e.dataUsageAssetUsage.graphseries=["CONSUMOS"];var h=function(o){if(e.dataUsageAssetList.items.length>0){var t=e.dataUsageAssetList.items[o].numeroSuministro;d.show({template:S.STYLE_IONICLOADING_TEMPLATE}),n.getAssetUsage(t,o).then(function(o){e.dataUsageAssetUsage.items=o.items,e.dataUsageAssetUsage.graphlabels=o.graphlabels,e.dataUsageAssetUsage.graphdata=o.graphdata,s.update(),d.hide()},function(o){c.error("Error AssetUsage: ",o),d.hide();var t=i.translation.ERROR_MODAL_TITLE,a=o.message;u.openModal("error",t,a,e)})}else{c.error("No data usage with that AssetId"),d.hide();var a=i.translation.ERROR_MODAL_TITLE,r=i.translation.NO_DATA;u.openModal("error",a,r,e)}};e.dataUsageAssetBills={},e.dataUsageAssetBills.items=[],e.dataUsageAssetBills.graphlabels=[],e.dataUsageAssetBills.graphdata=[],e.dataUsageAssetBills.graphseries=["BOLETAS"];var T=function(o){if(e.dataUsageAssetList.items.length>0){var t=e.dataUsageAssetList.items[o].numeroSuministro;d.show({template:S.STYLE_IONICLOADING_TEMPLATE}),n.getAssetBills(t,o).then(function(o){e.dataUsageAssetBills.items=o.items,e.dataUsageAssetBills.graphlabels=o.graphlabels,e.dataUsageAssetBills.graphdata=o.graphdata,s.update(),d.hide()},function(o){c.error("Error AssetBills: ",o),d.hide();var t=i.translation.ERROR_MODAL_TITLE,a=o.message;u.openModal("error",t,a,e)})}else{c.error("No data bills with that AssetId"),d.hide();var a=i.translation.ERROR_MODAL_TITLE,r=i.translation.NO_DATA;u.openModal("error",a,r,e)}};e.dataUsageAssetPayments={},e.dataUsageAssetPayments.items=[],e.dataUsageAssetPayments.graphlabels=[],e.dataUsageAssetPayments.graphdata=[],e.dataUsageAssetPayments.graphseries=["PAGOS"];var L=function(o){if(e.dataUsageAssetList.items.length>0){var t=e.dataUsageAssetList.items[o].numeroSuministro;d.show({template:S.STYLE_IONICLOADING_TEMPLATE}),n.getAssetPayments(t,o).then(function(o){e.dataUsageAssetPayments.items=o.items,e.dataUsageAssetPayments.graphlabels=o.graphlabels,e.dataUsageAssetPayments.graphdata=o.graphdata,s.update(),d.hide()},function(o){c.error("Error AssetPayments: ",o),d.hide();var t=i.translation.ERROR_MODAL_TITLE,a=o.message;u.openModal("error",t,a,e)})}else{c.error("No data payments with that AssetId"),d.hide();var a=i.translation.ERROR_MODAL_TITLE,r=i.translation.NO_DATA;u.openModal("error",a,r,e)}};e.payBill=function(){p.evento("Inicio","Presionar pagar cuenta");var t=e.dataUsageAssetDetail,a=parseInt(t.montoUltimaBoleta,10);if(c.info("valor a pagar: ",a),null!=t.montoUltimaBoleta&&"0"!=t.montoUltimaBoleta&&a>0)m.setItem("payBillObject",t),o.go("session.payBill");else{c.debug("Error");var r=i.translation.ERROR_MODAL_TITLE,s=i.translation.NO_ACTIVE_DEBT;u.openModal("error",r,s,e)}},e.pagerClick=function(o){c.info("se aplica slide button"),e.selectedIdex=o,c.info("$scope.selectedIdex slide: ",e.selectedIdex),c.info("anterior: "+e.selectedIdex),c.info("actual: "+o),s.slide(o)},e.slideHasChanged=function(o){c.info("se aplica slide slide"),e.selectedIdex=o,c.info("$scope.selectedIdex slide: ",e.selectedIdex),N(),s.slide(o),e.changeTab(0)};var I=function(){c.debug("orientation change"),90==r.orientation||-90==r.orientation?(c.debug("es orientacion 90"),e.dataUsageAssetUsage.items=e.dataUsageAssetUsage.items.reverse(),e.dataUsageAssetUsage.graphlabels=e.dataUsageAssetUsage.graphlabels.reverse(),e.dataUsageAssetUsage.graphdata=e.dataUsageAssetUsage.graphdata.reverse(),e.isHorizontal=!0):(c.debug("es orientacion 180"),e.dataUsageAssetUsage.items=e.dataUsageAssetUsage.items.reverse(),e.dataUsageAssetUsage.graphlabels=e.dataUsageAssetUsage.graphlabels.reverse(),e.dataUsageAssetUsage.graphdata=e.dataUsageAssetUsage.graphdata.reverse(),e.isHorizontal=!1),c.debug("current state: "+o.current.name),a.reload()};r.addEventListener("orientationchange",I),e.goToInsertReading=function(){m.setItem("currentUsageIndex",e.selectedIdex),o.go("session.enterReading")},e.closeModal=function(){c.debug("unlogging"),e.modal.hide()};var N=function(){e.dataUsageAssetDetail={},e.dataUsageAssetPayments={},e.dataUsageAssetPayments.items=[],e.dataUsageAssetPayments.graphlabels=[],e.dataUsageAssetPayments.graphdata=[],e.dataUsageAssetPayments.graphseries=["PAGOS"],e.dataUsageAssetBills={},e.dataUsageAssetBills.items=[],e.dataUsageAssetBills.graphlabels=[],e.dataUsageAssetBills.graphdata=[],e.dataUsageAssetBills.graphseries=["BOLETAS"],e.dataUsageAssetUsage={},e.dataUsageAssetUsage.items=[],e.dataUsageAssetUsage.graphlabels=[],e.dataUsageAssetUsage.graphdata=[],e.dataUsageAssetUsage.graphseries=["CONSUMOS"]};e.$on("$locationChangeSuccess",function(e,o){if(o.indexOf("session/usage")>-1){c.debug("stateChangeSuccess session/usag");A()}})}]),angular.module("CoreModule",[]),angular.module("CoreModule").controller("notificationsCtrl",["$scope","$ionicModal","AnalyticsService",function(e,o,t){o.fromTemplateUrl("views/Notifications/notificationsDetails.html",{scope:e,animation:"fade"}).then(function(o){e.modal=o}),e.openModal=function(){e.modal.show()},e.sendAnalytics=function(e,o){t.evento(e,o)},e.closeModal=function(){t.evento("Notificaciones","Aceptar lectura notificación"),e.modal.hide()},e.$on("$destroy",function(){}),e.$on("modal.hidden",function(){}),e.$on("modal.removed",function(){})}]),angular.module("FeaturedModule",["CoreModule"]),angular.module("FeaturedModule").controller("featuredDescriptionCtrl",["$scope","$window","DataMapService","$log",function(e,o,t,a){e.featuredDescription=t.getItem("featured_detail",!1),e.openUrl=function(e){window.open(e,"_system")},e.goFeatured=function(){t.getItem("featured_detail",!1)&&t.deleteItem("featured_detail"),o.history.back()}}]),angular.module("FeaturedModule").controller("featuredCtrl",["$scope","$rootScope","$state","FeaturedService","DataMapService","$log","$ionicModal","$ionicLoading","AnalyticsService","PopupService","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l,d){e.featuredList=[];var m=function(){i.show({template:d.STYLE_IONICLOADING_TEMPLATE}),a.getFeaturedItems().then(function(o){e.featuredList=o,i.hide()},function(t){s.error("Error: ",t),i.hide();var a=o.translation.ERROR_MODAL_TITLE,r=t.message;l.openModal("error",a,r,e)})};e.featuredDescription=function(a){c.evento("Destacados","Presionar Destacado "+(a+1)),r.setItem("featured_detail",e.featuredList[a]),o.isLogged?t.go("session.featuredDescription"):t.go("guest.featuredDescription")},e.closeModal=function(){e.modal.hide()},e.$on("$locationChangeSuccess",function(e,o){(o.indexOf("guest/featured")>-1||o.indexOf("session/featured")>-1)&&m()})}]),angular.module("CoreModule").controller("preBlackoutCtrl",["$scope","$state","$ionicModal","$ionicLoading","AccessService","DataMapService","$rootScope","$log","LocalStorageProvider","PopupService","$sce","ENDPOINTS","AnalyticsService","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l,d,m,u,g){function f(){i.debug("reseteando Pre Blackout"),e.forms.preBlackoutForm.$setPristine();var o=c.getLocalStorageItem("no_session_client_number");o&&!n.isLogged?e.forms.preBlackoutForm.clientNum.$setViewValue(o):e.forms.preBlackoutForm.clientNum.$viewValue="",e.forms.preBlackoutForm.clientNum.$render()}e.buttons={chosen:""},e.forms={},e.sendAnalytics=function(e,o){u.evento(e,o)},e.validateForm=function(){if(n.isReportNotLogged=!1,i.debug("isReportNotLogged: "+n.isReportNotLogged),e.forms.preBlackoutForm.$valid){var t=e.buttons.chosen,d=e.forms.preBlackoutForm.clientNum.$viewValue,m=0;m=d.indexOf("-")>-1?d.indexOf("-"):d.length-1;var u=d.substring(0,m),f=u+"-"+d.substr(d.length-1);a.show({template:g.STYLE_IONICLOADING_TEMPLATE}),r.getCommercialData(u).then(function(r){switch(i.debug("OBJ: ",r),t){case"consultButton":if(null==r.estadoSuministro||-1!=r.estadoSuministro.indexOf("corte")&&-1!=r.estadoSuministro.indexOf("CORTE")){a.hide();var d=n.translation.ERROR_MODAL_TITLE,m=r;l.openModal("error",d,m,e)}else{i.info("no tiene corte"),a.hide(),s.setItem("uniqueAsset",!0);var u={};u.index=0,u.direccion=r.direccion,u.numeroSuministro=r.numeroSuministro,s.setItem("reportBlackoutObject",u),i.info("elemento a guardar: ",s.getItem("reportBlackoutObject")),n.isReportNotLogged=!0,i.debug("isReportNotLogged: "+n.isReportNotLogged),n.isLogged||c.setLocalStorageItem("no_session_client_number",f),o.go("guest.blackout")}}},function(o){i.error("Error: ",o),a.hide();var t=n.translation.ERROR_MODAL_TITLE,r=o.message;l.openModal("error",t,r,e)})}else i.debug("formulario incorrecto")},e.searchClientId=function(){u.evento("Corte de luz - Paso 1","Presionar buscar número de cliente");var o=n.translation.HELPER_MODAL_TITLE,t=d.trustAsResourceUrl(m.ENDPOINTS_EXTERNAL_SEARCH_CLIENTID);l.openModal("iframe",o,t,e)},e.helpModal=function(){u.evento("Corte de luz - Paso 1","Presionar ayuda número de cliente");var o=n.translation.HELPER_MODAL_TITLE,t=g.IMAGE_ASSET_MODAL_HELP;l.openModal("help",o,t,e)},e.closeModal=function(){e.modal.hide()},e.$on("$locationChangeSuccess",function(e,o){o.indexOf("guest/preBlackout")>-1&&(i.debug("llamando a resetForm Pre Blackout"),f())})}]),angular.module("CoreModule").controller("lightingProblemsCtrl",["$scope","$log","LocalStorageProvider","$rootScope","UtilsService","EmergencyService","$ionicModal","$state","$ionicLoading","$cordovaGeolocation","ContactService","AnalyticsService","PopupService","UTILS_CONFIG",function(e,o,t,a,r,s,n,c,l,d,m,u,g,f){function p(){if(o.debug("reseteando"),E){if(E.calle){e.forms.lightingForm.street.$setViewValue(E.calle);var a=S(E.calle);a?e.forms.lightingForm.number.$setViewValue(a):e.forms.lightingForm.number.$setViewValue("")}else e.forms.lightingForm.street.$setViewValue("");E.comuna&&(e.forms.lightingForm.state.$modelValue=A(E.comuna))}else e.forms.lightingForm.number.$setViewValue(""),e.forms.lightingForm.street.$setViewValue("");force.isAuthenticated()||(e.forms.lightingForm.departament.$setViewValue(""),e.forms.lightingForm.name.$setViewValue(""),e.forms.lightingForm.lastname.$setViewValue(""),e.forms.lightingForm.email.$setViewValue(""),e.forms.lightingForm.phone.$setViewValue(""),e.forms.lightingForm.cellphone.$setViewValue(""),e.forms.lightingForm.description.$setViewValue(""));var r=t.getLocalStorageItem("no_session_form_data");!force.isAuthenticated()&&r&&(e.forms.lightingForm.street.$setViewValue(r.street),e.forms.lightingForm.number.$setViewValue(r.number),e.forms.lightingForm.departament.$setViewValue(r.department),e.forms.lightingForm.name.$setViewValue(r.name),e.forms.lightingForm.lastname.$setViewValue(r.lastname),e.forms.lightingForm.email.$setViewValue(r.email),e.forms.lightingForm.phone.$setViewValue(r.phone),e.forms.lightingForm.cellphone.$setViewValue(r.cellphone)),e.forms.lightingForm.typeOfProblem.$render(),e.forms.lightingForm.street.$render(),e.forms.lightingForm.number.$render(),e.forms.lightingForm.departament.$render(),e.forms.lightingForm.state.$render(),force.isAuthenticated()||(e.forms.lightingForm.name.$render(),e.forms.lightingForm.lastname.$render(),e.forms.lightingForm.email.$render(),e.forms.lightingForm.phone.$render(),e.forms.lightingForm.cellphone.$render(),e.forms.lightingForm.description.$render()),e.forms.lightingForm.$setPristine()}var E;e.authenticated,e.listStates=[],e.listProblemTypes=[];var _=function(e){var o=e.split(",");return{calle:o[0],comuna:o[1],region:o[2],pais:o[3]}};e.sendAnalytics=function(e,o){u.evento(e,o)},e.alertMe=function(e){alert(e)};var S=function(e){const o=/ (\d+)/;var t=o.exec(e);return t?t[0].trim():""},A=function(o){for(i=0;i<e.listStates.length;i++)if(-1!==e.listStates[i].nombreComuna.toUpperCase().indexOf(o.toUpperCase()))return e.listStates[i];return null};e.closeModal=function(){o.debug("sending to emergency"),e.modal.hide(),force.isAuthenticated()?c.go("session.emergency"):c.go("guest.emergency")};var v=function(t){l.hide(),o.debug(t);var r=a.translation.SUCCESS_MODAL_TITLE,s="Su caso ha sido ingresado con el numero: "+t.caseNumber;g.openModal("info",r,s,e)},h=function(t){l.hide(),o.error(t);var r=a.translation.ERROR_MODAL_TITLE,s="Su caso no ha podido ser ingresado:  "+t.message;g.openModal("error",r,s,e)};e.forms={},e.validateForm=function(){if(e.forms.lightingForm.$valid){o.debug("formulario OK");var a=t.getLocalStorageItem("no_session_form_data");a&&null!=a&&"null"!=a?(a.street=e.forms.lightingForm.street.$viewValue,a.number=e.forms.lightingForm.number.$viewValue,a.department=e.forms.lightingForm.departament.$viewValue,a.state=e.forms.lightingForm.state.$viewValue,e.authenticated||(a.name=e.forms.lightingForm.name.$viewValue,a.lastname=e.forms.lightingForm.lastname.$viewValue,a.email=e.forms.lightingForm.email.$viewValue,a.phone=e.forms.lightingForm.phone.$viewValue,a.cellphone=e.forms.lightingForm.cellphone.$viewValue)):a=e.authenticated?{street:e.forms.lightingForm.street.$viewValue,number:e.forms.lightingForm.number.$viewValue,department:e.forms.lightingForm.departament.$viewValue,state:e.forms.lightingForm.state.$viewValue}:{street:e.forms.lightingForm.street.$viewValue,number:e.forms.lightingForm.number.$viewValue,department:e.forms.lightingForm.departament.$viewValue,state:e.forms.lightingForm.state.$viewValue,name:e.forms.lightingForm.name.$viewValue,lastname:e.forms.lightingForm.lastname.$viewValue,email:e.forms.lightingForm.email.$viewValue,phone:e.forms.lightingForm.phone.$viewValue,cellphone:e.forms.lightingForm.cellphone.$viewValue},t.setLocalStorageItem("no_session_form_data",a),l.show({template:f.STYLE_IONICLOADING_TEMPLATE}),force.isAuthenticated()?s.emergencyLightingProblemAuth(e.forms.lightingForm.typeOfProblem.$modelValue.value,e.forms.lightingForm.street.$modelValue,e.forms.lightingForm.number.$modelValue,e.forms.lightingForm.departament.$modelValue,e.forms.lightingForm.state.$viewValue.codigoComuna,e.forms.lightingForm.description.$modelValue).then(v,h):s.emergencyLightingProblem(e.forms.lightingForm.typeOfProblem.$modelValue.value,e.forms.lightingForm.street.$modelValue,e.forms.lightingForm.number.$modelValue,e.forms.lightingForm.departament.$modelValue,e.forms.lightingForm.state.$viewValue.codigoComuna,e.forms.lightingForm.name.$viewValue,e.forms.lightingForm.lastname.$viewValue,e.forms.lightingForm.email.$viewValue,e.forms.lightingForm.phone.$viewValue,e.forms.lightingForm.cellphone.$viewValue,e.forms.lightingForm.description.$modelValue).then(v,h)}else o.debug("formulario incorrecto")},e.$on("$locationChangeSuccess",function(t,a){(a.indexOf("guest/lightingProblems")>-1||a.indexOf("session/lightingProblems")>-1)&&(e.authenticated=force.isAuthenticated(),l.show({template:f.STYLE_IONICLOADING_TEMPLATE}),s.getLightingProblemsList().then(function(t){o.debug(t),e.listProblemTypes=t,l.hide()},function(e){o.error(e),l.hide()}),l.show({template:f.STYLE_IONICLOADING_TEMPLATE}),r.getStates().then(function(t){e.listStates=t,o.debug("llamando a resetForm Accident Risk");var a={timeout:5e3,maximumAge:3e4,enableHighAccuracy:!0};d.getCurrentPosition(a).then(function(e){var t=e.coords.latitude,a=e.coords.longitude;m.geocodeLatLng(t,a).then(function(e){o.info(e),E=_(e),l.hide(),p()},function(e){o.error(e),l.hide(),p()})},function(e){o.error(e),l.hide(),p()})},function(e){l.hide(),p()}))})}]),angular.module("CoreModule").controller("emergencyCtrl",["$scope","$state","$rootScope","$log","AnalyticsService",function(e,o,t,a,r){e.goToBlackOut=function(){r.evento("Emergencia","Presionar Reportar Emergencia"),t.tabActualAnalytics="Corte de Luz",a.debug("go blackout"),a.debug("force.isAuthenticated(): "+force.isAuthenticated()),force.isAuthenticated()?o.go("session.blackout"):o.go("guest.preBlackout")},e.goToLightingProblems=function(){r.evento("Emergencia","Presionar Reportar Problemas de Alumbrado"),t.tabActualAnalytics="Problemas de Alumbrado",a.debug("go lightingProblems"),a.debug("force.isAuthenticated(): "+force.isAuthenticated()),force.isAuthenticated()?o.go("session.lightingProblems"):o.go("guest.lightingProblems")},e.goToAccidentRisk=function(){r.evento("Emergencia","Presionar Reportar Riesgo o Accidente"),t.tabActualAnalytics="Riesgo o Accidente",a.debug("go accidentRisk"),a.debug("force.isAuthenticated(): "+force.isAuthenticated()),force.isAuthenticated()?o.go("session.accidentRisk"):o.go("guest.accidentRisk")}}]),angular.module("CoreModule").controller("blackoutCtrl",["$scope","UtilsService","$ionicSlideBoxDelegate","DataMapService","$log","LocalStorageProvider","$rootScope","UsageService","EmergencyService","$ionicModal","$state","$ionicLoading","AnalyticsService","$route","PopupService","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l,d,m,u,g,f,p){function E(){e.isLogged=n.isLogged,e.dataBlackout={},m.show({template:p.STYLE_IONICLOADING_TEMPLATE});var s={value:p.BLACKOUT_TYPE_PROBLEM_1,label:n.translation.BLACKOUT_AT_HOME},i={value:p.BLACKOUT_TYPE_PROBLEM_2,label:n.translation.BLACKOUT_AT_NEIGHBORHOOD};if(c.getBlackoutProblemsList().then(function(o){r.debug(o),e.typesOfProblems1=o.length>0&&o[0]?o[0]:s,e.typesOfProblems2=o.length>0&&o[1]?o[1]:i,A=e.typesOfProblems1.value,m.hide()},function(o){e.typesOfProblems1=s,e.typesOfProblems2=i,r.error(o),m.hide()}),e.isLogged){r.info("está logeado");try{a.deleteItem("uniqueAsset"),e.dataBlackout.items=[],o.getAssetList(n.contactId).then(function(o){if(o.length>0)e.dataBlackout.items=o,S=e.dataBlackout.items[0].numeroSuministro,t.update();else{r.error("No data with that contactId");var a=n.translation.ERROR_MODAL_TITLE,s=n.translation.NO_DATA;f.openModal("error",a,s,e)}},h)}catch(e){r.error("Error: ",e)}}else{r.info("no está logeado");try{if(a.getItem("uniqueAsset",!1))r.info("ES UN ELEMENTO UNICO"),e.dataBlackout.items=[],e.dataBlackout.items.push(a.getItem("reportBlackoutObject",!1)),r.info("items: ",e.dataBlackout.items),t.update();else{r.error("Imposible to find Object: uniqueAsset");var l=n.translation.ERROR_MODAL_TITLE;f.openModal("error",l,"Imposible to find Object: uniqueAsset",e)}}catch(e){r.info("Error: ",e)}}}function _(){if(r.debug("reseteando BlackOut"),e.forms.blackoutForm){var o=s.getLocalStorageItem("no_session_form_data");o?e.isLogged?r.debug("está autenticado: no se guardará data en LS"):(o.name=e.forms.blackoutForm.name.$viewValue,o.lastname=e.forms.blackoutForm.lastnames.$viewValue,o.email=e.forms.blackoutForm.email.$viewValue,o.phone=e.forms.blackoutForm.phone.$viewValue):e.isLogged?r.debug("está autenticado: no se guardará data en LS"):o={name:e.forms.blackoutForm.name.$viewValue,lastnames:e.forms.blackoutForm.lastnames.$viewValue,email:e.forms.blackoutForm.email.$viewValue,phone:e.forms.blackoutForm.phone.$viewValue},e.forms.blackoutForm.description.$viewValue="",e.forms.blackoutForm.description.$render(),e.forms.blackoutForm.$setPristine()}else r.debug("no existe aun el formulario");e.selected1tab=!0,e.selected2tab=!1}e.sendAnalytics=function(e,o){u.evento(e,o)},e.$on("$locationChangeSuccess",function(e,o){(o.indexOf("session/blackout")>-1||o.indexOf("guest/blackout")>-1)&&(r.debug("llamando a resetForm BlackOut"),_(),E())}),e.isLogged,e.dataBlackout;var S;e.typesOfProblems1={},e.typesOfProblems2={};var A=0;e.selected1tab=!0,e.selected2tab=!1,e.closeModal=function(){r.debug("sending to home"),e.modal.hide(),n.isLogged?d.go("session.emergency"):d.go("guest.emergency")};var v=function(o){m.hide(),r.debug(o);var t=n.translation.SUCCESS_MODAL_TITLE,a=n.translation.SUCCESS_CASE_ENTERED_WITH_NUMBER+" "+o.caseNumber;f.openModal("validation",t,a,e)},h=function(o){m.hide(),r.error(o);var t=n.translation.ERROR_MODAL_TITLE,a=o.message;f.openModal("error",t,a,e)};e.pagerClick=function(e){r.info("se aplica slide button"),t.slide(e)},e.slideHasChanged=function(e){_(),t.update(),g.reload()},e.forms={},e.validateForm=function(){if(e.forms.blackoutForm.$valid){r.info("formulario OK");var o=s.getLocalStorageItem("no_session_form_data");o?e.isLogged||(o.name=e.forms.blackoutForm.name.$viewValue,o.lastname=e.forms.blackoutForm.lastnames.$viewValue,o.email=e.forms.blackoutForm.email.$viewValue,o.phone=e.forms.blackoutForm.phone.$viewValue,o.description=e.forms.blackoutForm.description.$viewValue):e.isLogged||(o={name:e.forms.blackoutForm.name.$viewValue,lastnames:e.forms.blackoutForm.lastnames.$viewValue,email:e.forms.blackoutForm.email.$viewValue,phone:e.forms.blackoutForm.phone.$viewValue,description:e.forms.blackoutForm.description.$viewValue}),s.setLocalStorageItem("no_session_form_data",o),m.show({template:p.STYLE_IONICLOADING_TEMPLATE}),r.info("selectedTypeProblem: ",A),force.isAuthenticated()?c.emergencyLightCutAuth(S,e.forms.blackoutForm.description.$modelValue,A).then(v,h):c.emergencyLightCut(S,e.forms.blackoutForm.description.$modelValue,A,e.forms.blackoutForm.name.$modelValue,e.forms.blackoutForm.lastnames.$modelValue,e.forms.blackoutForm.email.$modelValue,e.forms.blackoutForm.phone.$modelValue).then(v,h)}else r.info("formulario incorrecto")},e.selectedProblem=function(o){e.selected1tab=!1,e.selected2tab=!1,A=o,o==e.typesOfProblems1.value?(u.evento("Corte de luz - Paso 2","Seleccionar:"+e.typesOfProblems1.label),e.selected1tab=!0):o==e.typesOfProblems2.value?(u.evento("Corte de luz - Paso 2","Seleccionar:"+e.typesOfProblems2.label),e.selected2tab=!0):(u.evento("Corte de luz - Paso 2","Seleccionar:"+e.typesOfProblems1.label),e.selected1tab=!0)}}]),angular.module("CoreModule").controller("accidentRiskCtrl",["$scope","$rootScope","$log","LocalStorageProvider","EmergencyService","$ionicModal","$state","$ionicLoading","UtilsService","$cordovaGeolocation","ContactService","AnalyticsService","PopupService","UTILS_CONFIG",function(e,o,t,a,r,s,n,c,l,d,m,u,g,f){function p(){if(t.debug("reseteando Accident Risk"),E){if(E.calle){e.forms.accidentForm.street.$setViewValue(E.calle);var o=S(E.calle);o?e.forms.accidentForm.number.$setViewValue(o):e.forms.accidentForm.number.$setViewValue("")}else e.forms.accidentForm.street.$setViewValue("");E.comuna&&(e.forms.accidentForm.state.$modelValue=A(E.comuna))}else e.forms.accidentForm.number.$setViewValue(""),e.forms.accidentForm.street.$setViewValue("");e.forms.accidentForm.departament.$setViewValue(""),force.isAuthenticated()||(e.forms.accidentForm.departament.$setViewValue(""),e.forms.accidentForm.name.$setViewValue(""),e.forms.accidentForm.lastname.$setViewValue(""),e.forms.accidentForm.email.$setViewValue(""),e.forms.accidentForm.phone.$setViewValue(""),e.forms.accidentForm.cellphone.$setViewValue(""),e.forms.accidentForm.description.$setViewValue(""));var r=a.getLocalStorageItem("no_session_form_data");!force.isAuthenticated()&&r&&(e.forms.accidentForm.street.$setViewValue(r.street),e.forms.accidentForm.number.$setViewValue(r.number),e.forms.accidentForm.departament.$setViewValue(r.department),e.forms.accidentForm.name.$setViewValue(r.name),e.forms.accidentForm.lastname.$setViewValue(r.lastname),e.forms.accidentForm.email.$setViewValue(r.email),e.forms.accidentForm.phone.$setViewValue(r.phone),e.forms.accidentForm.cellphone.$setViewValue(r.cellphone)),e.forms.accidentForm.typeOfProblem.$render(),e.forms.accidentForm.street.$render(),e.forms.accidentForm.number.$render(),e.forms.accidentForm.departament.$render(),e.forms.accidentForm.state.$render(),force.isAuthenticated()||(e.forms.accidentForm.name.$render(),e.forms.accidentForm.lastname.$render(),e.forms.accidentForm.email.$render(),e.forms.accidentForm.phone.$render(),e.forms.accidentForm.cellphone.$render(),e.forms.accidentForm.description.$render()),e.forms.accidentForm.$setPristine()}var E;e.authenticated,e.listStates=[],e.listProblemTypes=[];var _=function(e){var o=e.split(",");return{calle:o[0],comuna:o[1],region:o[2],pais:o[3]}};e.sendAnalytics=function(e,o){u.evento(e,o)};var S=function(e){const o=/ (\d+)/;var t=o.exec(e);return t?t[0].trim():""},A=function(o){for(i=0;i<e.listStates.length;i++)if(-1!==e.listStates[i].nombreComuna.toUpperCase().indexOf(o.toUpperCase()))return e.listStates[i];return null};e.closeModal=function(){t.debug("sending to emergency"),e.modal.hide(),force.isAuthenticated()?n.go("session.emergency"):n.go("guest.emergency")};var v=function(a){c.hide(),t.debug(a);var r=o.translation.SUCCESS_MODAL_TITLE,s="Su caso ha sido ingresado con el numero: "+a.caseNumber;g.openModal("info",r,s,e)},h=function(a){c.hide(),t.error(a);var r=o.translation.ERROR_MODAL_TITLE,s="Su caso no ha podido ser ingresado:  "+a.message;g.openModal("error",r,s,e)};e.forms={},e.validateForm=function(){if(e.forms.accidentForm.$valid){t.debug("formulario OK");var o=a.getLocalStorageItem("no_session_form_data");o?(o.street=e.forms.accidentForm.street.$viewValue,o.number=e.forms.accidentForm.number.$viewValue,o.department=e.forms.accidentForm.departament.$viewValue,o.state=e.forms.accidentForm.state.$viewValue,e.authenticated||(o.name=e.forms.accidentForm.name.$viewValue,o.lastname=e.forms.accidentForm.lastname.$viewValue,o.email=e.forms.accidentForm.email.$viewValue,o.phone=e.forms.accidentForm.phone.$viewValue,o.cellphone=e.forms.accidentForm.cellphone.$viewValue)):o=e.authenticated?{street:e.forms.accidentForm.street.$viewValue,number:e.forms.accidentForm.number.$viewValue,department:e.forms.accidentForm.departament.$viewValue,state:e.forms.accidentForm.state.$viewValue}:{street:e.forms.accidentForm.street.$viewValue,number:e.forms.accidentForm.number.$viewValue,department:e.forms.accidentForm.departament.$viewValue,state:e.forms.accidentForm.state.$viewValue,name:e.forms.accidentForm.name.$viewValue,lastname:e.forms.accidentForm.lastname.$viewValue,email:e.forms.accidentForm.email.$viewValue,phone:e.forms.accidentForm.phone.$viewValue,cellphone:e.forms.accidentForm.cellphone.$viewValue},a.setLocalStorageItem("no_session_form_data",o),c.show({template:f.STYLE_IONICLOADING_TEMPLATE}),force.isAuthenticated()?r.emergencyRiskAccidentAuth(e.forms.accidentForm.typeOfProblem.$modelValue.value,e.forms.accidentForm.street.$viewValue,e.forms.accidentForm.number.$viewValue,e.forms.accidentForm.departament.$viewValue,e.forms.accidentForm.state.$viewValue.codigoComuna,e.forms.accidentForm.description.$modelValue).then(v,h):r.emergencyRiskAccident(e.forms.accidentForm.typeOfProblem.$modelValue.value,e.forms.accidentForm.street.$modelValue,e.forms.accidentForm.number.$modelValue,e.forms.accidentForm.departament.$modelValue,e.forms.accidentForm.state.$viewValue.codigoComuna,e.forms.accidentForm.name.$viewValue,e.forms.accidentForm.lastname.$viewValue,e.forms.accidentForm.email.$viewValue,e.forms.accidentForm.phone.$viewValue,e.forms.accidentForm.cellphone.$viewValue,e.forms.accidentForm.description.$modelValue).then(v,h)}else t.debug("formulario incorrecto")},e.$on("$locationChangeSuccess",function(o,a){(a.indexOf("guest/accidentRisk")>-1||a.indexOf("session/accidentRisk")>-1)&&(e.authenticated=force.isAuthenticated(),c.show({template:f.STYLE_IONICLOADING_TEMPLATE}),r.getRiskAccidentProblemsList().then(function(o){t.debug(o),e.listProblemTypes=o,c.hide()},function(e){t.error(e),c.hide()}),c.show({template:f.STYLE_IONICLOADING_TEMPLATE}),l.getStates().then(function(o){e.listStates=o,t.debug("llamando a resetForm Accident Risk");var a={timeout:5e3,maximumAge:3e4,enableHighAccuracy:!0};d.getCurrentPosition(a).then(function(e){var o=e.coords.latitude,a=e.coords.longitude;m.geocodeLatLng(o,a).then(function(e){t.info(e),E=_(e),c.hide(),p()},function(e){t.error(e),c.hide(),p()})},function(e){t.error(e),c.hide(),p()})},function(e){c.hide(),p()}))})}]),angular.module("CoreModule").controller("tutorialCtrl",["$scope","$log","AnalyticsService","$state","LocalStorageProvider",function(e,o,t,a,r){e.antIndex=0,e.sendAnalytics=function(e,o){t.evento(e,o)},e.passTuto=function(o,t){e.sendAnalytics(o,t),r.setLocalStorageItem("passTuto",!0),a.go("guest.home")},e.options={loop:!1,effect:"slide",speed:500,onInit:function(o){e.swiper=o},onSlideChangeEnd:function(o){e.antIndex<o.activeIndex?t.evento("Splash "+(e.antIndex+1),"Swipe Right"):t.evento("Splash "+(e.antIndex+1),"Swipe Left"),e.antIndex=o.activeIndex}},e.$on("$ionicSlides.sliderInitialized",function(o,t){e.slider=t.slider}),e.$on("$ionicSlides.slideChangeStart",function(e,t){o.debug("Slide change is beginning")}),e.$on("$ionicSlides.slideChangeEnd",function(o,t){e.activeIndex=t.slider.activeIndex,e.previousIndex=t.slider.previousIndex})}]),angular.module("CoreModule").controller("profileCtrl",["$scope","$state","$ionicModal","$rootScope","$log","AccessService","$ionicLoading","PopupService","$q","ProfileService","LocalStorageProvider","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l,d,m){function u(){if(r.debug("reseteando Profile"),d.getLocalStorageItem("user_data")){var o=d.getLocalStorageItem("user_data");"si"===o.activarNotificaciones&&(e.booleanNotifications=!0),e.userFullName=o.nombre+" "+o.apellidoPaterno+" "+o.apellidoMaterno,e.forms.profileForm1.email.$viewValue=o.email,e.forms.profileForm1.cellphone.$viewValue=o.telefonoMovil,e.forms.profileForm1.phone.$viewValue=o.telefonoFijo}else e.forms.profileForm1.email.$viewValue="",e.forms.profileForm1.cellphone.$viewValue="",e.forms.profileForm1.phone.$viewValue="";e.forms.profileForm2.password.$viewValue="",e.forms.profileForm2.newPassword.$viewValue="",e.forms.profileForm1.email.$render(),e.forms.profileForm1.cellphone.$render(),e.forms.profileForm1.phone.$render(),e.forms.profileForm2.password.$render(),e.forms.profileForm2.newPassword.$render(),
e.forms.profileForm1.$setPristine(),e.forms.profileForm2.$setPristine()}e.booleanNotifications=!1,window.sc=e,e.forms={},e.validateForm1=function(){if(e.forms.profileForm1.$valid){r.info("formulario 1 OK");var o=e.forms.profileForm1.checkNotifications.$viewValue,t=e.forms.profileForm1.email.$modelValue,a=e.forms.profileForm1.cellphone.$modelValue,s=e.forms.profileForm1.phone.$modelValue;n.show({template:m.STYLE_IONICLOADING_TEMPLATE}),l.updateUserData(o,t,a,s).then(g,f)}else r.debug("formulario incorrecto")},e.validateForm2=function(){if(e.forms.profileForm2.$valid)if(r.info("formulario2 OK"),e.forms.profileForm2.password.$modelValue&&e.forms.profileForm2.newPassword.$modelValue&&e.forms.profileForm2.password.$modelValue==e.forms.profileForm2.newPassword.$modelValue){var o=e.forms.profileForm2.password.$modelValue,t=e.forms.profileForm2.newPassword.$modelValue;n.show({template:m.STYLE_IONICLOADING_TEMPLATE}),l.changePassword(o,t).then(g,f)}else r.error("contraseñas distintas");else r.debug("formulario incorrecto")};var g=function(o){n.hide(),r.debug(o);var t=a.translation.SUCCESS_MODAL_TITLE,s=o;i.openModal("validation",t,s,e)},f=function(o){n.hide(),r.error(o);var t=a.translation.ERROR_MODAL_TITLE,s=o.message;i.openModal("error",t,s,e)};e.$on("$locationChangeSuccess",function(e,o){o.indexOf("session/profile")>-1&&(r.debug("llamando a resetForm Profile"),u())}),e.logout=function(){r.debug("unlogging");var o=a.translation.LOGOUT_MODAL_TITLE,t=a.translation.LOGOUT_MODAL_CONTENT;i.openModal("logout",o,t,e)},e.clearUserData=function(){s.getLogout(),o.go("guest.home"),e.modal.hide()},e.closeModal=function(){e.modal.hide()}}]),angular.module("CoreModule").controller("oauthcallbackCtrl",["$scope","$log","$rootScope","window",function(e,o,t,a){a.opener.force&&a.opener.force.oauthCallback?(a.opener.force.oauthCallback(decodeURIComponent(a.location.href)),alert("en foce")):a.opener.oauthCallback&&(a.opener.oauthCallback(decodeURIComponent(a.location.href)),alert("no foce"))}]),angular.module("CoreModule").controller("landingCtrl",["$state","$scope","$log","$rootScope",function(e,o,t,a){force.isAuthenticated()?(a.isLogged=!0,e.go("session.usage")):(a.isLogged=!1,e.go("guest.home"))}]),angular.module("CoreModule").controller("footerCtrl",["$scope","$state","$log","AnalyticsService","$rootScope",function(e,o,t,a,r){e.isProfile=!1,e.sendAnalytics=function(e,o){""===e&&(""===r.tabActualAnalytics&&(r.tabActualAnalytics="Resumen - Resumen"),e=r.tabActualAnalytics),a.evento(e,o),r.tabActualAnalytics="Perfil"},e.selectedTab=function(e){switch(t.debug("elemento seleccionado: "+e),e){case 1:a.evento("Inicio","Presionar Inicio"),t.debug("Selected Case Number is 1"),o.go("guest.home");break;case 2:a.evento("Inicio","Presionar Emergencia"),r.tabActualAnalytics="Emergencia",t.debug("Selected Case Number is 2"),o.go("guest.emergency");break;case 3:a.evento("Inicio","Presionar Contacto"),r.tabActualAnalytics="Contacto",t.debug("Selected Case Number is 3"),o.go("guest.contact");break;case 4:a.evento("Inicio","Presionar Destacados"),r.tabActualAnalytics="Destacados",t.debug("Selected Case Number is 4"),o.go("guest.featured");break;case 5:a.evento("Resumen - Resumen","Presionar Resumen"),r.tabActualAnalytics="Resumen",t.debug("Selected Case Number is 5"),o.go("session.usage");break;case 6:a.evento("Resumen - Resumen","Presionar Emergencia"),r.tabActualAnalytics="Emergencia",t.debug("Selected Case Number is 6"),o.go("session.emergency");break;case 7:a.evento("Resumen - Resumen","Presionar Contacto"),r.tabActualAnalytics="Contacto",t.debug("Selected Case Number is 7"),o.go("session.contact");break;case 8:a.evento("Resumen - Resumen","Presionar Notificaciones"),r.tabActualAnalytics="Notificaciones",t.debug("Selected Case Number is 8"),o.go("session.notifications");break;case 9:a.evento("Resumen - Resumen","Presionar Destacados"),r.tabActualAnalytics="Destacados",t.debug("Selected Case Number is 9"),o.go("session.featured");break;default:a.evento("Inicio","Presionar Inicio"),r.tabActualAnalytics="Inicio",o.go("guest.home")}},e.$on("$locationChangeSuccess",function(o,a){a.indexOf("session/profile")>-1?(t.debug("isprofile=true"),e.isProfile=!0):(t.debug("isprofile=false"),e.isProfile=!1)})}]),angular.module("LocationsModule",["CoreModule"]),angular.module("LocationsModule").controller("paymentOptionsCtrl",["$scope",function(e){}]),angular.module("LocationsModule").controller("menuContactCtrl",["$scope","$state","UtilsService","$rootScope","$log","AnalyticsService","UTILS_CONFIG",function(e,o,t,a,r,s,n){e.goCall=function(){s.evento("Contacto","Presionar Atención Telefónica")},e.goContactForm=function(){s.evento("Contacto","Presionar Formulario de Contacto"),a.tabActualAnalytics="Contacto - Formulario de Contacto",r.debug("go contact form"),r.debug("$rootScope.isLogged: "+a.isLogged),a.isLogged?o.go("session.contactForm"):o.go("guest.contactForm")},e.goBranchesMap=function(){s.evento("Contacto","Presionar Sucursales"),a.tabActualAnalytics="Contacto - Sucursales",r.debug("go branches map"),r.info("$rootScope.isLogged: "+a.isLogged),a.isLogged?o.go("session.branchesMap"):o.go("guest.branchesMap")},e.phoneNumber=n.CONTACT_PHONE_NUMER}]),angular.module("ContactModule",["CoreModule"]),angular.module("ContactModule").controller("contactFormCtrl",["$scope","$state","$ionicSlideBoxDelegate","$ionicLoading","$log","$rootScope","LocalStorageProvider","AnalyticsService","UtilsService","PopupService","ContactService","UTILS_CONFIG","$route",function(e,o,t,a,r,s,n,i,c,l,d,m,u){function g(){if(e.forms.contactForm){r.debug("reseteando Contact Form");var o=n.getLocalStorageItem("no_session_form_data");if(0==e.isLogged){if(o){e.forms.contactForm.rut.$setViewValue(o.rut),e.forms.contactForm.names.$setViewValue(o.name),e.forms.contactForm.lastName.$setViewValue(o.lastname),e.forms.contactForm.motherLastName.$setViewValue(o.motherLastname),e.forms.contactForm.email.$setViewValue(o.email),e.forms.contactForm.phone.$setViewValue(o.phone);var t=n.getLocalStorageItem("no_session_client_number");t&&e.forms.contactForm.numClient.$setViewValue(t)}else e.forms.contactForm.rut.$viewValue="",e.forms.contactForm.names.$viewValue="",e.forms.contactForm.lastName.$viewValue="",e.forms.contactForm.motherLastName.$viewValue="",e.forms.contactForm.email.$viewValue="",e.forms.contactForm.phone.$viewValue="",e.forms.contactForm.numClient.$viewValue="";e.forms.contactForm.rut.$render(),e.forms.contactForm.names.$render(),e.forms.contactForm.lastName.$render(),e.forms.contactForm.motherLastName.$render(),e.forms.contactForm.email.$render(),e.forms.contactForm.phone.$render(),e.forms.contactForm.numClient.$render()}e.forms.contactForm.topic.$viewValue="",e.forms.contactForm.topic.$render(),e.forms.contactForm.message.$viewValue="",e.forms.contactForm.message.$render(),e.forms.contactForm.$setPristine()}u.reload()}e.isLogged=s.isLogged,e.actualIndex=0,e.dataContactForm={},e.pagerClick=function(e){r.info("se aplica slide button"),t.slide(e)},e.slideHasChanged=function(o){r.debug("slide ejecutado"),e.actualIndex<o?i.evento("Formulario de Contacto","Swipe Right Suministros"):i.evento("Formulario de Contacto","Swipe Left Suministros"),e.actualIndex=o,g(),t.update(),u.reload()},e.sendAnalytics=function(e,o){i.evento(e,o)},e.forms={},e.buttons={chosen:""};var f=function(){a.show({template:m.STYLE_IONICLOADING_TEMPLATE}),c.getSubjectList().then(function(o){a.hide(),r.debug(),e.typeList=o},function(e){a.hide(),r.error(e.message)}),e.dataContactForm.items=[],1==e.isLogged&&(a.show({template:m.STYLE_IONICLOADING_TEMPLATE}),c.getAssetList().then(function(o){if(o.length>0)e.dataContactForm.items=o,a.hide(),t.update();else{r.error("No data"),a.hide();var n=s.translation.ERROR_MODAL_TITLE,i=s.translation.NO_DATA;l.openModal("error",n,i,e)}},function(o){r.error("Error to get Asset List: ",o),a.hide();var t=s.translation.ERROR_MODAL_TITLE,n=o.message;l.openModal("error",t,n,e)}))};e.validateForm=function(){if(e.forms.contactForm.$valid){r.debug("formulario OK");var t,i=e.forms.contactForm.topic.$viewValue.value,c=e.forms.contactForm.message.$viewValue;try{t=n.getLocalStorageItem("no_session_form_data")}catch(e){r.error("Error to get no_session_form_data localstorage ")}if(1==e.isLogged){var u=e.dataContactForm.items[e.actualIndex].numeroSuministro;a.show({template:m.STYLE_IONICLOADING_TEMPLATE}),d.setContactFormAuth(u,i,c).then(function(t){a.hide();var r=s.translation.SUCCESS_MODAL_TITLE,n="Su contacto ha sido ingresado con el numero: "+t.caseNumber;l.openModal("validation",r,n,e,function(){o.go("session.contact"),e.modal.hide()})},function(o){a.hide();var t=s.translation.ERROR_MODAL_TITLE,r=s.translation.ERROR_FIND_GEOCODE+o.message;l.openModal("error",t,r,e,function(){e.modal.hide()})})}else{var u=e.forms.contactForm.numClient.$viewValue,g=e.forms.contactForm.rut.$viewValue,f=e.forms.contactForm.names.$viewValue,p=e.forms.contactForm.lastName.$viewValue,E=e.forms.contactForm.motherLastName.$viewValue,_=e.forms.contactForm.email.$viewValue,S=e.forms.contactForm.phone.$viewValue;t?(t.rut=e.forms.contactForm.rut.$viewValue,t.name=e.forms.contactForm.names.$viewValue,t.lastname=e.forms.contactForm.lastName.$viewValue,t.motherLastname=e.forms.contactForm.motherLastName.$viewValue,t.email=e.forms.contactForm.email.$viewValue,t.phone=e.forms.contactForm.phone.$viewValue):t={rut:e.forms.contactForm.rut.$viewValue,name:e.forms.contactForm.names.$viewValue,lastname:e.forms.contactForm.lastName.$viewValue,motherLastname:e.forms.contactForm.motherLastName.$viewValue,email:e.forms.contactForm.email.$viewValue,phone:e.forms.contactForm.phone.$viewValue},a.show({template:m.STYLE_IONICLOADING_TEMPLATE}),d.setContactForm(u,i,g,f,p,E,_,S,c).then(function(r){a.hide(),n.setLocalStorageItem("no_session_form_data",t);var i=s.translation.SUCCESS_MODAL_TITLE,c="Su contacto ha sido ingresado con el numero: "+r.caseNumber;l.openModal("validation",i,c,e,function(){o.go("guest.contact"),e.modal.hide()})},function(o){a.hide();var t=s.translation.ERROR_MODAL_TITLE,r="Su contacto no ha podido ser ingresado:  "+o.message;l.openModal("error",t,r,e,function(){e.modal.hide()})})}}else r.debug("formulario incorrecto")},e.$on("$locationChangeSuccess",function(e,o){(o.indexOf("guest/contactForm")>-1||o.indexOf("session/contactForm")>-1)&&(r.debug("llamando a resetForm Contact Form"),g(),f())})}]),angular.module("CoreModule").controller("branchesMapCtrl",["$scope","$state","$window","$rootScope","UtilsService","$cordovaGeolocation","ContactService","DataMapService","$log","LocalStorageProvider","$route","$ionicLoading","AnalyticsService","PopupService","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l,d,m,u,g,f){function p(){var o={zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP};e.map=new google.maps.Map(document.getElementById("map"),o);var t={timeout:1e4,enableHighAccuracy:!0};s.getCurrentPosition(t).then(function(o){var t=new google.maps.LatLng(o.coords.latitude,o.coords.longitude);c.debug("posicion: ",o.coords.latitude,"/",o.coords.longitude),e.map.setCenter(t)},function(e){c.debug("Could not get location")}),n.getBranchesItems().then(function(o){e.markersJson=o,e.selectedItem(1)},function(o){var t=a.translation.ERROR_MODAL_TITLE,r=a.translation.ERROR_FIND_GEOCODE+o.message;g.openModal("info",t,r,e,function(){e.modal.hide()})}),a.tabActualAnalytics="Sucursales Cercanas"}function E(t,r){if(m.show({template:f.STYLE_IONICLOADING_TEMPLATE}),t)for(var s=0;s<t.length;s++){var n=t[s],l=new google.maps.Marker({position:new google.maps.LatLng(n.latitud,n.longitud),map:e.map});l.addListener("click",function(){i.setItem("branches_detail",n),a.isLogged?o.go("session.branchesDescription"):o.go("guest.branchesDescription")}),r==f.CONTACT_CODE_BRANCHES?e.markersGoogle.branches.push(l):r==f.CONTACT_CODE_PAYMENT_PLACES&&e.markersGoogle.paymentPlaces.push(l)}else c.error("imposible to get markers");r==f.CONTACT_CODE_BRANCHES?e.selectedBar1=!0:r==f.CONTACT_CODE_PAYMENT_PLACES&&(e.selectedBar2=!0),m.hide()}function _(e){m.show({template:f.STYLE_IONICLOADING_TEMPLATE});for(var o=0;o<e.length;o++){e[o].setMap(null)}m.hide()}e.goToMap=function(){u.evento("Sucursales Cercanas","Presionar Mapa"),a.tabActualAnalytics="Sucursales Cercanas",c.debug("go goToMap"),c.debug("$rootScope.isLogged: "+a.isLogged),a.isLogged?o.go("session.branchesMap"):o.go("guest.branchesMap")},e.goToList=function(){u.evento("Sucursales Cercanas","Presionar Lista"),a.tabActualAnalytics="Sucursales Cercanas",c.debug("go goToList"),c.debug("$rootScope.isLogged: "+a.isLogged),1==a.isLogged?o.go("session.branchesList"):o.go("guest.branchesList")},e.markersJson={},e.markersGoogle={},e.markersGoogle.branches=[],e.markersGoogle.paymentPlaces=[];var S=f.CONTACT_CODE_BRANCHES,A=f.CONTACT_CODE_PAYMENT_PLACES;e.sendAnalytics=function(e,o){u.evento(e,o)},e.selectedItem=function(t){switch(e.selectedBar1=!1,e.selectedBar2=!1,c.debug("$scope.selectedBar1: "+e.selectedBar1),c.debug("$scope.selectedBar2: "+e.selectedBar2),c.debug("$scope.selectedBar3: "+e.selectedBar3),t){case 1:u.evento("Sucursales Cercanas","Presionar Sucursales"),a.tabActualAnalytics="Sucursales Cercanas",c.debug("Selected Case Number is 1"),_(e.markersGoogle.branches),_(e.markersGoogle.paymentPlaces),a.isLogged?o.go("session.branchesMap"):o.go("guest.branchesMap"),e.markersJson.branches&&E(e.markersJson.branches,S),d.reload();break;case 2:u.evento("Sucursales Cercanas","Presionar Lugares de Pago"),a.tabActualAnalytics="Sucursales Cercanas",c.debug("Selected Case Number is 2"),_(e.markersGoogle.branches),_(e.markersGoogle.paymentPlaces),a.isLogged?o.go("session.branchesMap"):o.go("guest.branchesMap"),e.markersJson.paymentPlaces&&E(e.markersJson.paymentPlaces,A),d.reload();break;case 3:u.evento("Sucursales Cercanas","Presionar Otros Medios de Pago"),a.tabActualAnalytics="Sucursales Cercanas",c.debug("Selected Case Number is 3"),a.isLogged?o.go("session.paymentOptions"):o.go("guest.paymentOptions"),d.reload();break;default:e.selectedBar1=!0,a.tabActualAnalytics="Sucursales Cercanas",c.debug("Selected Case Default"),_(e.markersGoogle.branches),_(e.markersGoogle.paymentPlaces),a.isLogged?o.go("session.branchesMap"):o.go("guest.branchesMap"),e.markersJson.branches&&E(e.markersJson.branches,S),d.reload()}},e.searchElementOnMap=function(o){if(u.evento("Sucursales Cercanas","Presionar Buscar"),o&&o.length>0){c.debug("address.length: ",o.length),m.show({template:f.STYLE_IONICLOADING_TEMPLATE});(new google.maps.Geocoder).geocode({address:o},function(o,t){if("OK"==t)e.map.setCenter(o[0].geometry.location),m.hide();else{m.hide(),c.error("Geocode was not successful for the following reason: "+t);var r=a.translation.ERROR_MODAL_TITLE,s=a.translation.ERROR_FIND_GEOCODE+t;g.openModal("info",r,s,e,function(){e.modal.hide()})}})}else{c.error("Search button empty");var t=a.translation.ERROR_MODAL_TITLE,r=a.translation.MUST_NOT_EMPTY;g.openModal("info",t,r,e,function(){e.modal.hide()})}},e.$on("$locationChangeSuccess",function(e,o){(o.indexOf("session/branchesMap")>-1||o.indexOf("guest/branchesMap")>-1)&&p()})}]),angular.module("CoreModule").controller("branchesListCtrl",["$scope","$state","$rootScope","$log","LocalStorageProvider","DataMapService","ContactService","$ionicLoading","PopupService","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l){function d(){e.branchesList={},i.show({template:l.STYLE_IONICLOADING_TEMPLATE}),n.getBranchesItems().then(function(o){a.debug(o),e.branchesList=o,i.hide()},function(o){a.error(o);var r=t.translation.ERROR_MODAL_TITLE,s=t.translation.ERROR_FIND_GEOCODE+o.message;c.openModal("info",r,s,e,function(){e.modal.hide()}),i.hide()})}e.goToMap=function(){a.debug("go goToMap"),a.debug("$rootScope.isLogged: "+t.isLogged),t.isLogged?o.go("session.branchesMap"):o.go("guest.branchesMap")},e.goToList=function(){a.debug("go goToList"),a.debug("$rootScope.isLogged: "+t.isLogged),t.isLogged?o.go("session.branchesList"):o.go("guest.branchesList")},e.viewDescription=function(r){e.branchesList.branches&&e.branchesList.branches[r]?(s.setItem("branches_detail",e.branchesList.branches[r]),t.isLogged?o.go("session.branchesDescription"):o.go("guest.branchesDescription")):a.error("Imposible to find element in list")},e.$on("$locationChangeSuccess",function(e,o){(o.indexOf("session/branchesList")>-1||o.indexOf("guest/branchesList")>-1)&&d()})}]),angular.module("CoreModule").controller("branchesDescriptionCtrl",["$scope","$state","$window","UtilsService","DataMapService","$log",function(e,o,t,a,r,s){e.branchesDescription=r.getItem("branches_detail",!1),s.debug("aux: ",e.branchesDescription),e.goBack=function(){r.getItem("branches_detail",!1)&&(s.info("se eliminará el objketo detalle"),r.deleteItem("branches_detail")),t.history.back()}}]),angular.module("BillsModule",["CoreModule"]),angular.module("BillsModule").controller("payBillCtrl",["$scope","$state","DataMapService","$log","AnalyticsService","$rootScope","$ionicLoading","BillsService","PopupService","ENDPOINTS","$sce","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l,d,m){function u(){e.isLogged=s.isLogged,e.items={};try{a.info("no está logeado");var o=t.getItem("payBillObject");a.debug("payBillObjects: ",o),o&&(e.items.direccion=o.direccion,e.items.estadoSuministro=o.estadoSuministro,e.items.idSuministro=o.idSuministro,e.items.montoDeudaAnterior=o.montoDeudaAnterior,e.items.montoUltimaBoleta=o.montoUltimaBoleta,e.items.nombreSuministro=o.nombreSuministro,e.items.numeroSuministro=o.numeroSuministro,parseInt(e.items.montoUltimaBoleta,10)>0&&(e.checkedItem=!0,e.showRecentAmount=!0,e.disablePayButton=!1),parseInt(e.items.montoDeudaAnterior,10)>0&&(e.showPreviousAmount=!0,e.disablePayButton=!1))}catch(e){a.info("Error: ",e)}}function g(){console.log("reseteando Pay Bill"),e.forms.payBillForm.email.$viewValue="",e.forms.payBillForm.email.$render(),e.forms.payBillForm.$setPristine()}e.checkedItem=!1,e.showPreviousAmount=!1,e.showRecentAmount=!1,e.disablePayButton=!0,e.forms={},e.validateForm=function(){e.forms.payBillForm.$valid?(a.info("formulario OK"),a.info("paybill: ",e.forms.payBillForm.payBill.$viewValue),e.items.amount=e.forms.payBillForm.payBill.$viewValue,e.items.email=e.forms.payBillForm.email.$viewValue,e.items.expirationDate="21/07/2017",e.items.issueDate="21/07/2017",e.items.onClickDate=moment().format("DD/MM/YYYY HH:mm:ss"),e.items.barcode="11100000019990000209427025190104",e.items.rut="11111111-1",e.items.name="Nombre",e.items.lastName="Nombre",e.isLogged&&(e.items.rut="11111111-1",e.items.name="Nombre",e.items.lastName="Nombre"),n.show({template:m.STYLE_IONICLOADING_TEMPLATE}),i.generateXmlPayment(e.items).then(function(o){n.hide(),a.info("conversion exitosa de XML");var t=s.translation.VALIDATION_MODAL_TITLE,r={};r.url=d.trustAsResourceUrl(l.ENDPOINTS_PAYMENT),r.xml=o,c.openModal("payment",t,r,e,function(){e.modal.hide()})},function(o){n.hide();var t=s.translation.ERROR_MODAL_TITLE,a=o;c.openModal("error",t,a,e,function(){e.modal.hide()})})):a.info("formulario incorrecto")},e.sendAnalytics=function(e,o){r.evento(e,o)},e.$on("$locationChangeSuccess",function(e,o){(o.indexOf("guest/payBill")>-1||o.indexOf("session/payBill")>-1)&&(a.debug("llamando a resetForm Pay Bill"),g(),u())})}]),angular.module("BillsModule").controller("enterReadingCtrl",["$scope","$state","$rootScope","$log","$ionicLoading","$ionicModal","DataMapService","LocalStorageProvider","BillsService","PopupService","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l,d){function m(){a.debug("reseteando Enter Reading"),e.forms.enterReadingForm.reading.$viewValue="",e.forms.enterReadingForm.readingDay.$viewValue="",e.forms.enterReadingForm.readingNight.$viewValue="",e.forms.enterReadingForm.readingPeak.$viewValue="",e.forms.enterReadingForm.$setPristine()}function u(){"Tarifa"===e.assetDetail.tarifa?(e.showFields.day=!1,e.showFields.night=!1,e.showFields.peak=!1,e.showFields.reading=!0):(e.assetDetail.tarifa,e.showFields.reading=!1,e.showFields.day=!0,e.showFields.night=!0,e.showFields.peak=!0)}e.forms={},e.selectedIndex=-1,e.assetDetail={},e.showFields={reading:!0,day:!0,night:!0,peak:!0},e.validateForm=function(){e.forms.enterReadingForm.$valid?(a.debug("formulario OK"),e.enterReading()):a.debug("formulario incorrecto")},e.enterReading=function(){var o={};o.reading=e.forms.enterReadingForm.reading.$modelValue,o.day=e.forms.enterReadingForm.readingDay.$modelValue,o.night=e.forms.enterReadingForm.readingNight.$modelValue,o.peak=e.forms.enterReadingForm.readingPeak.$modelValue,r.show({template:d.STYLE_IONICLOADING_TEMPLATE}),c.setEnterReading(e.assetDetail.numeroSuministro,o.reading,o.day,o.night,o.peak).then(function(o){if(r.hide(),o.data){var t="El codigo de su lectura es el "+o.data.caseId;e.openModal("info","Ingreso Lectura",t)}else a.error("no data")},function(o){r.hide();var a=t.translation.ERROR_MODAL_TITLE,s=o.message;l.openModal("error",a,s,e)})},e.closeModal=function(){e.modal.hide()},e.$on("$locationChangeSuccess",function(o,t){t.indexOf("session/enterReading")>-1&&(a.debug("llamando a resetForm Enter Reading"),e.selectedIndex=n.getItem("currentUsageIndex",!0),e.assetDetail=i.getLocalStorageItem("asset_detail_"+e.selectedIndex),a.debug(e.selectedIndex),a.debug(e.assetDetail.tarifa),u(),m())})}]),angular.module("AccessModule",["CoreModule","ngPassword"]),angular.module("AccessModule").controller("verificationPassCtrl",["$state","$scope","$log","DataMapService","AccessService","PopupService","$ionicLoading","$rootScope","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c){function l(){var t=o.forms.verificationPass.newPass.$modelValue,l=o.forms.verificationPass.repeatNewPass.$modelValue,d=a.getItem("verification_step_1_rut"),m=o.forms.verificationPass.code.$modelValue;n.show({template:c.STYLE_IONICLOADING_TEMPLATE}),r.changePasswordNoAuth(d,t,l,m).then(function(t){s.openModal("info",i.translation.SUCCESS_MODAL_TITLE,i.translation.SUCCESS_PROFILE_CHANGE,o,function(){e.go("guest.login"),o.modal.hide()})},function(e){n.hide();var t=i.translation.ERROR_MODAL_TITLE,a=e.message;s.openModal("error",t,a,o,function(){o.modal.hide()})})}function d(){console.log("reseteando VerificationPass"),o.forms.verificationPass.newPass.$viewValue="",o.forms.verificationPass.newPass.$render(),o.forms.verificationPass.repeatNewPass.$viewValue="",o.forms.verificationPass.repeatNewPass.$render(),o.forms.verificationPass.code.$viewValue="",o.forms.verificationPass.code.$render(),o.forms.verificationPass.$setPristine()}o.forms={},o.formValidation=function(){o.forms.verificationPass.$valid?(t.debug("datos ok"),l()):console.log("formulario incorrecto")},o.regenerateCode=function(){var e;try{e=a.getItem("verification_step_1_rut",!1)}catch(e){t.debug("no es posible obtener user_id");var l=i.translation.ERROR_MODAL_TITLE;return void s.openModal("error",l,"no es posible obtener user_id",o,function(){o.modal.hide()})}n.show({template:c.STYLE_IONICLOADING_TEMPLATE});var d=e;r.requestPasswordChangeCode(d).then(function(e){n.hide();var t=i.translation.HELPER_MODAL_TITLE,a=i.translation.SUCCESS_CODE_SENT;s.openModal("info",t,a,o,function(){o.modal.hide()})},function(e){var t=i.translation.ERROR_MODAL_TITLE,a=e.message;s.openModal("error",t,a,o,function(){o.modal.hide()})})},o.$on("$locationChangeSuccess",function(e,o){o.indexOf("guest/verificationPass")>-1&&(t.debug("llamando a resetForm VerificationPass"),d())})}]),angular.module("AccessModule").controller("verificationCtrl",["$state","$scope","$log","LocalStorageProvider","DataMapService","$rootScope","PopupService","AccessService","$ionicLoading","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l){function d(){t.debug("reseteando Verification"),o.forms.step1Verification.rut.$viewValue="",o.forms.step1Verification.rut.$render(),o.forms.step1Verification.$setPristine()}o.forms={},o.formValidationStep1=function(){if(o.forms.step1Verification.$valid){t.debug("datos ok"),c.show({template:l.STYLE_IONICLOADING_TEMPLATE});var a=o.forms.step1Verification.rut.$viewValue,d=0;d=a.indexOf("-")>-1?a.indexOf("-"):a.length-1;var m=a.substring(0,d),u=m+"-"+a.substr(a.length-1);i.requestPasswordChangeCode(u).then(function(t){c.hide();var a=s.translation.HELPER_MODAL_TITLE,i=s.translation.SUCCESS_CODE_SENT;n.openModal("info",a,i,o,function(){r.setItem("verification_step_1_rut",u),e.go("guest.verificationPass"),o.modal.hide()})},function(e){var t=s.translation.ERROR_MODAL_TITLE,a=e.message;n.openModal("error",t,a,o,function(){o.modal.hide()})})}else t.debug("formulario incorrecto")},o.$on("$locationChangeSuccess",function(e,o){o.indexOf("guest/verification")>-1&&(t.debug("llamando a resetForm Verification"),d())})}]),angular.module("AccessModule").controller("validationCtrl",["$state","$scope","$log","AccessService","DataMapService","$rootScope","PopupService","$ionicLoading","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c){function l(){var l;try{l=r.getItem("new_user_id",!1)}catch(e){t.debug("no es posible obtener user_id");var d=s.translation.ERROR_MODAL_TITLE;return n.openModal("error",d,"no es posible obtener user_id",o,function(){o.modal.hide()}),void t.debug("no es posible obtener new:user_id")}i.show({template:c.STYLE_IONICLOADING_TEMPLATE}),a.validateUser(l,o.forms.activateAccount.insertCode.$viewValue).then(function(a){i.hide(),t.info(a);var r=s.translation.SUCCESS_MODAL_TITLE,c=s.translation.SUCCESS_USER_VALIDATED;n.openModal("info",r,c,o,function(){e.go("guest.login"),o.modal.hide()})},function(e){i.hide();var t=s.translation.ERROR_MODAL_TITLE,a=e.message;n.openModal("error",t,a,o,function(){o.modal.hide()})})}function d(){t.debug("reseteando Validation"),o.forms.activateAccount.insertCode.$viewValue="",o.forms.activateAccount.insertCode.$render(),o.forms.activateAccount.$setPristine()}o.forms={},o.validateForm=function(){o.forms.activateAccount.$valid?(t.debug("formulario ok"),l()):t.debug("formulario incorrecto")},o.regenerateCode=function(){try{r.getItem("verification_step_1_rut",!1)}catch(a){t.debug("no es posible obtener rut_id");var e=s.translation.ERROR_MODAL_TITLE;return void n.openModal("error",e,"no es posible obtener rut_id",o,function(){o.modal.hide()})}i.show({template:c.STYLE_IONICLOADING_TEMPLATE});var l=r.getItem("verification_step_1_rut");a.requestPasswordChangeCode(l).then(function(e){i.hide();var t=s.translation.HELPER_MODAL_TITLE,a=s.translation.SUCCESS_CODE_SENT;n.openModal("info",t,a,o,function(){o.modal.hide()})},function(e){var t=s.translation.ERROR_MODAL_TITLE,a=e.message;n.openModal("error",t,a,o,function(){o.modal.hide()})})},o.$on("$locationChangeSuccess",function(e,o){o.indexOf("guest/validation")>-1&&(t.debug("llamando a resetForm Validation"),d())})}]),angular.module("AccessModule").controller("startCtrl",["$scope",function(e){}]),angular.module("AccessModule").controller("registerCtrl",["$scope","$log","AnalyticsService","AccessService","$ionicLoading","DataMapService","$rootScope","PopupService","$state","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l){function d(){var o=e.forms.registerForm.rut.$viewValue,t=0;t=o.indexOf("-")>-1?o.indexOf("-"):o.length-1;var d=o.substring(0,t),m=d+"-"+o.substr(o.length-1),u=e.forms.registerForm.numClient.$viewValue,g=0;g=u.indexOf("-")>-1?u.indexOf("-"):u.length-1;var f=u.substring(0,g),p=(u.substr(u.length-1),{rut:m,name:e.forms.registerForm.names.$viewValue,FathersLastName:e.forms.registerForm.lastName.$viewValue,MothersLastName:e.forms.registerForm.motherLastName.$viewValue,HomePhone:e.forms.registerForm.phone.$viewValue,MobilePhone:e.forms.registerForm.cellphone.$viewValue,email:e.forms.registerForm.email.$viewValue,alias:e.forms.registerForm.alias.$viewValue,numberClient:f,numberTicket:e.forms.registerForm.numLastService.$viewValue,newPassword:e.forms.registerForm.password.$viewValue,verifyNewPassword:e.forms.registerForm.passwordConfirm.$viewValue});r.show({template:l.STYLE_IONICLOADING_TEMPLATE}),a.registerUser(p).then(function(e){r.hide(),s.setItem("new_user_id",e.userId),s.setItem("verification_step_1_rut",p.rut),c.go("guest.validation")},function(o){r.hide();var t=n.translation.ERROR_MODAL_TITLE,a=o.message;i.openModal("error",t,a,e,function(){e.modal.hide()})})}function m(){o.debug("reseteando Registro"),e.forms.registerForm.rut.$viewValue="",e.forms.registerForm.rut.$render(),e.forms.registerForm.names.$viewValue="",e.forms.registerForm.names.$render(),e.forms.registerForm.lastName.$viewValue="",e.forms.registerForm.lastName.$render(),e.forms.registerForm.motherLastName.$viewValue="",e.forms.registerForm.motherLastName.$render(),e.forms.registerForm.phone.$viewValue="",e.forms.registerForm.phone.$render(),e.forms.registerForm.cellphone.$viewValue="",e.forms.registerForm.cellphone.$render(),e.forms.registerForm.email.$viewValue="",e.forms.registerForm.email.$render(),e.forms.registerForm.alias.$viewValue="",e.forms.registerForm.alias.$render(),e.forms.registerForm.numClient.$viewValue="",e.forms.registerForm.numClient.$render(),e.forms.registerForm.numLastService.$viewValue="",e.forms.registerForm.numLastService.$render(),e.forms.registerForm.password.$viewValue="",e.forms.registerForm.password.$render(),e.forms.registerForm.passwordConfirm.$viewValue="",e.forms.registerForm.passwordConfirm.$render(),e.forms.registerForm.$setPristine()}e.forms={},e.validateForm=function(){e.forms.registerForm.$valid?(o.debug("datos correctos"),d()):o.debug("formulario incorrecto")},e.sendAnalytics=function(e,o){t.evento(e,o)},e.$on("$locationChangeSuccess",function(e,t){t.indexOf("guest/register")>-1&&(o.debug("llamando a resetForm Registro"),m())})}]),angular.module("AccessModule").controller("loginCtrl",["$scope","$state","$rootScope","$log","AccessService","$rootScope","AnalyticsService","PopupService","$ionicLoading","UTILS_CONFIG",function(e,o,t,a,r,t,s,n,i,c){function l(){a.info("reseteando login"),e.forms.loginForm?(e.forms.loginForm.rut.$viewValue="",e.forms.loginForm.password.$viewValue="",e.forms.loginForm.rut.$render(),e.forms.loginForm.password.$render(),e.forms.loginForm.$setPristine()):a.info("no existe formulario aun")}e.sendAnalytics=function(e,o){s.evento(e,o)},e.forms={},e.validateForm=function(){if(s.evento("Ingresar","Presionar Ingresar"),e.forms.loginForm.$valid){a.debug("datos correctos");var l=e.forms.loginForm.rut.$viewValue,d=0;d=l.indexOf("-")>-1?l.indexOf("-"):l.length-1;var m=l.substring(0,d),u=m+"-"+l.substr(l.length-1),g=e.forms.loginForm.password.$viewValue;i.show({template:c.STYLE_IONICLOADING_TEMPLATE}),r.getLoginServices(u,g).then(function(e){a.info("response login: ",e),i.hide(),t.isLogged=!0,o.go("session.usage")},function(o){a.error(o),i.hide();var r=t.translation.ERROR_MODAL_TITLE,s=o.message;n.openModal("error",r,s,e)})}else a.debug("formulario incorrecto")},e.closeModal=function(){e.modal.hide()},e.$on("$locationChangeSuccess",function(e,o){o.indexOf("guest/login")>-1&&(a.debug("llamando a resetForm Login"),l())})}]),angular.module("AccessModule").controller("homeCtrl",["$scope","$state","$ionicLoading","AccessService","DataMapService","$rootScope","$log","LocalStorageProvider","ENDPOINTS","$sce","PopupService","AnalyticsService","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l,d,m,u){function g(){n.info("reseteando Home");var o=i.getLocalStorageItem("no_session_client_number");e.forms.homeForm?(o&&!s.isLogged?e.forms.homeForm.clientNum.$setViewValue(o):e.forms.homeForm.clientNum.$viewValue="",e.forms.homeForm.$setPristine(),e.forms.homeForm.clientNum.$render()):n.info("no existe formulario aun")}s.isReportNotLogged=!1,e.buttons={chosen:""},e.forms={},e.sendAnalytics=function(e,o){m.evento(e,o)},e.validateForm=function(){if(e.forms.homeForm.$valid){var c=e.buttons.chosen;n.info("item: ",c);var l=e.forms.homeForm.clientNum.$viewValue,g=0;g=l.indexOf("-")>-1?l.indexOf("-"):l.length-1;var f=l.substring(0,g),p=f+"-"+l.substr(l.length-1);t.show({template:u.STYLE_IONICLOADING_TEMPLATE}),a.getCommercialData(f).then(function(a){switch(c){case"payButton":m.evento("Inicio","Presionar pagar cuenta");var l=parseInt(a.montoUltimaBoleta,10);if(n.info("valor a pagar: ",l),null!=a.montoUltimaBoleta&&"0"!=a.montoUltimaBoleta&&l>0)t.hide(),
r.setItem("payBillObject",a),s.isLogged||i.setLocalStorageItem("no_session_client_number",p),o.go("guest.payBill");else{n.debug("Error"),t.hide();var u="error",g=s.translation.ERROR_MODAL_TITLE,f=s.translation.NO_ACTIVE_DEBT;d.openModal(u,g,f,e)}break;case"reportButton":if(m.evento("Inicio","Presionar reportar corte"),null==a.estadoSuministro||-1!=a.estadoSuministro.indexOf("corte")&&-1!=a.estadoSuministro.indexOf("CORTE")){t.hide();var u="error",g=s.translation.ERROR_MODAL_TITLE,f=a;d.openModal(u,g,f,e)}else{n.info("no tiene corte"),t.hide(),r.setItem("uniqueAsset",!0);var E={};E.index=0,E.direccion=a.direccion,E.numeroSuministro=a.numeroSuministro,r.setItem("reportBlackoutObject",E),s.isReportNotLogged=!0,n.debug("isReportNotLogged: "+s.isReportNotLogged),s.isLogged||i.setLocalStorageItem("no_session_client_number",p),o.go("guest.blackout")}}},function(o){n.error("Error: ",o),t.hide();var a=s.translation.ERROR_MODAL_TITLE,r=o.message;d.openModal("error",a,r,e)})}else n.debug("formulario incorrecto")},e.searchClientId=function(){m.evento("Inicio","Presionar buscar número de cliente");var o=s.translation.HELPER_MODAL_TITLE,a=l.trustAsResourceUrl(c.ENDPOINTS_EXTERNAL_SEARCH_CLIENTID);t.show({template:u.STYLE_IONICLOADING_TEMPLATE}),d.openModal("iframe",o,a,e)},e.helpModal=function(){m.evento("Inicio","Presionar ayuda número de cliente");var o=s.translation.HELPER_MODAL_TITLE,t=u.IMAGE_ASSET_MODAL_HELP;d.openModal("help",o,t,e)},e.closeModal=function(){e.modal.hide()},e.$on("$locationChangeSuccess",function(e,o){o.indexOf("guest/home")>-1&&(n.debug("llamando a resetForm Home"),g())})}]),angular.module("AccessModule").controller("connectionCtrl",["$scope",function(e){}]),angular.module("AccessModule").controller("closeCtrl",["$state","$scope",function(e,o){}]),angular.module("UsageModule").factory("UsageService",["$q","ConnectionProvider","SalesforceProvider","LocalStorageProvider","$log","ENDPOINTS","AccessService",function(e,o,t,a,r,s,n){return pub={},pub.getAssetList=function(){var o=e.defer();if(a.getLocalStorageItem("asset_list"))o.resolve(a.getLocalStorageItem("asset_list"));else{var i={};i.path=s.ENDPOINTS_ASSESTS_LIST,i.method="GET",i.contentType="application/json",i.params={},i.data="",t.request(i).then(function(e){if("200"==e.code.toString()){r.info("getAssetList ",e.data);var t=[];null!=e.data&&e.data.length>0&&angular.forEach(e.data,function(e,o){r.info(o+" : ",e);var a={};a.index=o,a.direccion=e.direccion.direccion+" "+e.direccion.comuna,a.numeroSuministro=e.numeroSuministro,t.push(a)}),a.setLocalStorageItem("asset_list",t),o.resolve(t)}else{r.error("Error AssetList: ",e.message);var s={};s.code=e.code,s.message=e.message,o.reject(s)}},function(e){if(e.errorCode&&"INVALID_SESSION_ID"==e.errorCode){if(a.getLocalStorageItem("login_data")){var t=a.getLocalStorageItem("login_data"),s=t.userNumber,i=t.password;n.getLoginServices(s,i).then(function(e){pub.getAssetList(contactId)},function(e){r.error("Error AssetList: ",e),o.reject(e)})}}else{r.error("Error AssetList: ",e);var c={};e[0]?(c.code=e[0].errorCode,c.message=e[0].message):e.code?(c.code=e.code,c.message=e.message):e.data?(c.code=e.data.status,c.message=e.data.msg):(c.code="400",c.message=e),o.reject(c)}})}return o.promise},pub.getAssetDetail=function(o,i){var c=e.defer();if(a.getLocalStorageItem("asset_detail_"+i))c.resolve(a.getLocalStorageItem("asset_detail_"+i));else{var l={};l.path=s.ENDPOINTS_ASSEST_DETAIL,l.method="GET",l.contentType="application/json",l.params={numeroSuministro:o},l.data="",t.request(l).then(function(e){if("200"==e.code.toString()){var o={};null!=e.data&&""!=e.data&&(o.tarifa=e.data.tarifa,o.numeroSuministro=e.data.numeroSuministro,o.nombreSuministro=e.data.nombreSuministro,o.montoUltimoPago=e.data.montoUltimoPago,o.montoUltimaBoleta=e.data.montoUltimaBoleta,o.montoDeudaAnterior=e.data.montoDeudaAnterior,o.idSuministro=e.data.idSuministro,o.fechaVencimiento=e.data.fechaVencimiento,o.fechaUltimoPago=e.data.fechaUltimoPago,o.fechaProximaLectura=e.data.fechaProximaLectura,o.fechaCorte=e.data.fechaCorte,o.estadoSuministro=e.data.estadoSuministro,o.direccion=e.data.direccion.calle+" "+e.data.direccion.casa+" "+e.data.direccion.departamento+" "+e.data.direccion.comuna),a.setLocalStorageItem("asset_detail_"+i,o),c.resolve(o)}else{r.error("Error AssetDetail: ",e.message);var t={};t.code=e.code,t.message=e.message,c.reject(t)}},function(e){if(e.errorCode&&"INVALID_SESSION_ID"==e.errorCode){if(a.getLocalStorageItem("login_data")){var t=a.getLocalStorageItem("login_data"),s=t.userNumber,l=t.password;n.getLoginServices(s,l).then(function(e){pub.getAssetDetail(o,i)},function(e){r.error("Error AssetList: ",e),c.reject(e)})}}else{r.error("Error AssetList: ",e);var d={};e[0]?(d.code=e[0].errorCode,d.message=e[0].message):e.code?(d.code=e.code,d.message=e.message):e.data?(d.code=e.data.status,d.message=e.data.msg):(d.code="400",d.message=e),c.reject(d)}})}return c.promise},pub.getAssetUsage=function(o,n){var i=e.defer();if(a.getLocalStorageItem("asset_usages_"+n))i.resolve(a.getLocalStorageItem("asset_usages_"+n));else{var c={};c.path=s.ENDPOINTS_CONSUMPTION,c.method="GET",c.contentType="application/json",c.params={numeroSuministro:o},c.data="",t.request(c).then(function(e){if("200"==e.code.toString()){r.info("getAssetUsage ",e.data);var o={},t=[],s=[],c=[];null!=e.data&&e.data.length>0&&angular.forEach(e.data,function(e,o){r.info(o+" : ",e);var a={};a.index=o,a.numeroCuenta=e.numeroCuenta,a.nombrePuntoDistribucion=e.nombrePuntoDistribucion,a.nombreConsumo=e.nombreConsumo,a.idPuntoDistribucion=e.idPuntoDistribucion,a.idConsumidor=e.idConsumidor,a.fechaLectura=e.fechaLectura,a.fechaFacturacion=e.fechaFacturacion,a.consumoEnergia=e.consumoEnergia,t.push(a),s.push(a.fechaLectura),c.push(a.consumoEnergia)}),o.items=t,o.graphlabels=s,o.graphdata=c,a.setLocalStorageItem("asset_usages_"+n,t),i.resolve(t)}else{r.error("Error AssetUsage: ",e.message);var l={};l.code=e.code,l.message=e.message,i.reject(l)}},function(e){r.error("Error AssetUsage: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),i.reject(o)})}return i.promise},pub.getAssetBills=function(o,n){var i=e.defer();if(a.getLocalStorageItem("asset_bills_"+n))i.resolve(a.getLocalStorageItem("asset_bills_"+n));else{var c={};c.path=s.ENDPOINTS_GET_BILLS,c.method="GET",c.contentType="application/json",c.params={numeroSuministro:o},c.data="",t.request(c).then(function(e){if("200"==e.code.toString()){r.info("getAssetBills ",e.data);var o={},t=[],s=[],c=[];null!=e.data&&e.data.length>0&&angular.forEach(e.data,function(e,o){r.info(o+" : ",e);var a={};a.index=o,a.monto=e.monto,a.fecha=e.fecha,t.push(a),s.push(a.fecha),c.push(a.monto)}),o.items=t,o.graphlabels=s,o.graphdata=c,a.setLocalStorageItem("asset_bills_"+n,o),i.resolve(o)}else{r.error("Error AssetBills: ",e.message);var l={};l.code=e.code,l.message=e.message,i.reject(l)}},function(e){r.error("Error AssetBills: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),i.reject(o)})}return i.promise},pub.getAssetPayments=function(o,n){var i=e.defer();if(a.getLocalStorageItem("asset_payments_"+n))i.resolve(a.getLocalStorageItem("asset_payments_"+n));else{var c={};c.path=s.ENDPOINTS_GET_PAYMENTS,c.method="GET",c.contentType="application/json",c.params={numeroSuministro:o},c.data="",t.request(c).then(function(e){if("200"==e.code.toString()){r.info("getAssetBills ",e.data);var o={},t=[],s=[],c=[];null!=e.data&&e.data.length>0&&angular.forEach(e.data,function(e,o){r.info(o+" : ",e);var a={};a.index=o,a.tipoPago=e.tipoPago,a.monto=e.monto,a.fechaPago=e.fechaPago,t.push(a),s.push(a.fechaPago),c.push(a.monto)}),o.items=t,o.graphlabels=s,o.graphdata=c,a.setLocalStorageItem("asset_payments_"+n,o),i.resolve(o)}else{r.error("Error AssetPayments: ",e.message);var l={};l.code=e.code,l.message=e.message,i.reject(l)}},function(e){r.error("Error AssetPayments: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),i.reject(o)})}return i.promise},pub.setEnterReading=function(o,a,n,i,c){var l=e.defer(),d={};return d.path=s.ENDPOINTS_ENTER_READING,d.method="GET",d.contentType="application/json",d.params=null==a||""==a||null!=n&&""!=n&&null!=i&&""!=i&&null!=c&&""!=c?null!=a&&""!=a||null==n||""==n||null==i||""==i||null==c||""==c?{numeroSuministro:o}:{numeroSuministro:o,lecturaDia:n,lecturaNoche:i,lecturaPunta:c}:{numeroSuministro:o,lectura:a},d.data="",t.request(d).then(function(e){if("200"==e.code.toString()){r.info("setEnterReading ",e.data);var o={};null!=e.data&&e.data.length>0&&(o.caseId=e.data.caseId),l.resolve(o)}else{r.error("Error AssetDetail: ",e.message);var t={};t.code=e.code,t.message=e.message,l.reject(t)}},function(e){r.error("Error AssetDetail: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),l.reject(o)}),l.promise},pub.removeUsageData=function(){try{var e=[];e.push("SALESFORCE_CONFIG"),e.push("branches"),e.push("contact_id"),e.push("login_url"),e.push("no_session_client_number"),a.removeLocalStorageItemExcept(e)}catch(e){r.error("err: ",e)}},pub}]),angular.module("FeaturedModule").factory("FeaturedService",["ConnectionProvider","$q",function(e,o){return{}}]),angular.module("FeaturedModule").factory("FeaturedService",["ConnectionProvider","$q","ENDPOINTS","$log","LocalStorageProvider",function(e,o,t,a,r){return{getFeaturedItems:function(){var s=o.defer(),n=t.ENDPOINTS_BASE_EXTERNAL+t.ENDPOINTS_FEATURED,i={},c={},l={"Content-type":"application/json"};return r.getLocalStorageItem("featured_list")?s.resolve(r.getLocalStorageItem("featured_list")):e.sendGet(n,i,c,l,function(e){if("200"==e.code.toString()){a.debug("Get Data: ",e);var o=[];angular.forEach(e.data,function(e,t){var a={index:t,titulo:e.titulo,subtitulo:e.subTitulo,detalle:e.detalle,url:e.url,imagen:e.imagen};o.push(a)}),r.setLocalStorageItem("featured_list",o),s.resolve(o)}else{a.error("Error Get Data: "+e.message);var t={};t.code=e.code,t.message=e.message,s.reject(t)}},function(e){a.error("Error Get Data: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),s.reject(o)}),s.promise}}}]),angular.module("EmergencyModule",[]),angular.module("EmergencyModule").factory("EmergencyService",["$q","ConnectionProvider","SalesforceProvider","$log","ENDPOINTS","LocalStorageProvider",function(e,o,t,a,r,s){return pub={},pub.emergencyLightCut=function(t,s,n,i,c,l,d){var m=e.defer(),u=r.ENDPOINTS_BASE_EXTERNAL+r.ENDPOINTS_EXTERNAL_EMERGENCY_BLACKOUT,g={bean:{numeroSuministro:t,tipoDeProblema:n,siniestro:s,nombre:i,apellidos:c,email:l,telefono:d}},f={},p={"Content-type":"application/json"};return o.sendPost(u,f,g,p,function(e){if("200"==e.code.toString())a.debug("Get Data: ",e),m.resolve(e.data);else{a.error("Error Get Data: "+e.message);var o={};o.code=e.code,o.message=e.message,m.reject(o)}},function(e){a.error("Error Get Data: "+e.message);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),m.reject(o)}),m.promise},pub.emergencyLightingProblem=function(t,s,n,i,c,l,d,m,u,g,f){var p=e.defer(),E=r.ENDPOINTS_BASE_EXTERNAL+r.ENDPOINTS_EXTERNAL_EMERGENCY_LIGHTING_PROBLEM,_={bean:{tipoDeProblema:t,calle:s,numero:n,departamento:i,comuna:c,nombre:l,apellidos:d,email:m,telefonoFijo:u,telefonoSegundario:g,siniestro:f}},S={},A={"Content-type":"application/json"};return o.sendPost(E,S,_,A,function(e){if("200"==e.code.toString())a.debug("Get Data: ",e),p.resolve(e.data);else{a.error("Error Get Data: "+e.message);var o={};o.code=e.code,o.message=e.message,p.reject(o)}},function(e){a.error("Error Get Data: "+e.message);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),p.reject(o)}),p.promise},pub.emergencyRiskAccident=function(t,s,n,i,c,l,d,m,u,g,f){var p=e.defer(),E=r.ENDPOINTS_BASE_EXTERNAL+r.ENDPOINTS_EXTERNAL_EMERGENCY_RISK_ACCIDENT,_={bean:{tipoDeProblema:t,calle:s,numero:n,departamento:i,comuna:c,nombre:l,apellidos:d,email:m,telefonoFijo:u,telefonoSegundario:g,siniestro:f}},S={},A={"Content-type":"application/json"};return o.sendPost(E,S,_,A,function(e){if("200"==e.code.toString())a.debug("Get Data: ",e),p.resolve(e.data);else{a.error("Error Get Data: "+e.message);var o={};o.code=e.code,o.message=e.message,p.reject(o)}},function(e){a.error("Error Get Data: "+e.message);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),p.reject(o)}),p.promise},pub.getBlackoutProblemsList=function(){var t=e.defer();if(s.getLocalStorageItem("blackout_list")&&s.getLocalStorageItem("blackout_list").length>0)t.resolve(s.getLocalStorageItem("blackout_list")),a.info("getBlakcoutList: ",s.getLocalStorageItem("blackout_list"));else{var n=r.ENDPOINTS_BASE_EXTERNAL+r.ENDPOINTS_BLACKOUT_PROBLEMS_LIST,i={},c={},l={"Content-type":"application/json"};o.sendGet(n,i,c,l,function(e){if(200==e.code){a.info("Get getBlackoutList: ",e.data);var o=[];a.info("largo: ",e.data.length);for(var r=0;r<e.data.length;r++)o.push(e.data[r]);s.setLocalStorageItem("blackout_list",o),t.resolve(o)}else{a.error("Error getBlackoutList: "+e.message);var o={};o.code=e.code,o.message=e.message,t.reject(o)}},function(e){a.error("Error getBlackoutList: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),t.reject(o)})}return t.promise},pub.getLightingProblemsList=function(){var t=e.defer();if(s.getLocalStorageItem("lighting_list")&&s.getLocalStorageItem("lighting_list").length>0)t.resolve(s.getLocalStorageItem("lighting_list")),a.info("getLightingList: ",s.getLocalStorageItem("lighting_list"));else{var n=r.ENDPOINTS_BASE_EXTERNAL+r.ENDPOINTS_LIGHTING_PROBLEMS_LIST,i={},c={},l={"Content-type":"application/json"};o.sendGet(n,i,c,l,function(e){if(200==e.code){a.info("Get getLightingList: ",e.data);var o=[];a.info("largo: ",e.data.length);for(var r=0;r<e.data.length;r++)o.push(e.data[r]);s.setLocalStorageItem("lighting_list",o),t.resolve(o)}else{a.error("Error getLightingList: "+e.message);var o={};o.code=e.code,o.message=e.message,t.reject(o)}},function(e){a.error("Error getLightingList: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),t.reject(o)})}return t.promise},pub.getRiskAccidentProblemsList=function(){var t=e.defer();if(s.getLocalStorageItem("risk_accident_list")&&s.getLocalStorageItem("risk_accident_list").length>0)t.resolve(s.getLocalStorageItem("risk_accident_list")),a.info("getRiskAccidentList: ",s.getLocalStorageItem("risk_accident_list"));else{var n=r.ENDPOINTS_BASE_EXTERNAL+r.ENDPOINTS_RISK_ACCIDENT_PROBLEMS_LIST,i={},c={},l={"Content-type":"application/json"};o.sendGet(n,i,c,l,function(e){if(200==e.code){a.info("Get getRiskAccidentList: ",e.data);var o=[];a.info("largo: ",e.data.length);for(var r=0;r<e.data.length;r++)o.push(e.data[r]);s.setLocalStorageItem("risk_accident_list",o),t.resolve(o)}else{a.error("Error getRiskAccidentList: "+e.message);var o={};o.code=e.code,o.message=e.message,t.reject(o)}},function(e){a.error("Error getRiskAccidentList: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),t.reject(o)})}return t.promise},pub.emergencyLightCutAuth=function(o,s,n){var i=e.defer(),c={};return c.path=r.ENDPOINTS_EMERGENCY_BLACKOUT,c.method="POST",c.contentType="application/json",c.data={bean:{numeroSuministro:o,siniestro:s,tipoDeProblema:n}},c.params="",t.request(c).then(function(e){if("200"==e.code.toString())a.info("RESPONSE EMERGENCY ",e),i.resolve(e.data);else{a.error("Error AssetList: ",e.message);var o={};o.code=e.code,o.message=e.message,i.reject(o)}},function(e){a.error("Error AssetList: ",e.message);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),i.reject(o)}),i.promise},pub.emergencyLightingProblemAuth=function(o,s,n,i,c,l){var d=e.defer(),m={};return m.path=r.ENDPOINTS_EMERGENCY_LIGHTING_PROBLEM,m.method="POST",m.contentType="application/json",m.data={bean:{tipoDeProblema:o,siniestro:l,calle:s,numero:n,departamento:i,comuna:c}},m.param="",t.request(m).then(function(e){if("200"==e.code.toString())a.info("RESPONSE EMERGENCY ",e),d.resolve(e.data);else{a.error("Error AssetList: ",e.message);var o={};o.code=e.code,o.message=e.message,d.reject(o)}},function(e){a.error("Error AssetList: ",e.message);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),d.reject(o)}),d.promise},pub.emergencyRiskAccidentAuth=function(o,s,n,i,c,l){var d=e.defer(),m={};return m.path=r.ENDPOINTS_EMERGENCY_RISK_ACCIDENT,m.method="POST",m.contentType="application/json",m.data={bean:{tipoDeProblema:o,siniestro:l,calle:s,numero:n,departamento:i,comuna:c}},m.params="",t.request(m).then(function(e){if("200"==e.code.toString())a.info("RESPONSE EMERGENCY ",e),d.resolve(e.data);else{a.error("Error AssetList: ",e.message);var o={};o.code=e.code,o.message=e.message,d.reject(o)}},function(e){a.error("Error AssetList: ",e.message);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),d.reject(o)}),d.promise},pub}]),angular.module("CoreModule").factory("UtilsService",["SalesforceProvider","$q","ENDPOINTS","$log","SALESFORCE_CONFIG","LocalStorageProvider","ConnectionProvider","AccessService","$state","$route","$ionicLoading",function(e,o,t,a,r,s,n,i,c,l,d){return pub={},pub.getStates=function(){var e=o.defer();if(s.getLocalStorageItem("states")&&s.getLocalStorageItem("states").length>0)e.resolve(s.getLocalStorageItem("states")),a.info("getStates: ",s.getLocalStorageItem("states"));else{var r=t.ENDPOINTS_BASE_EXTERNAL+t.ENDPOINTS_GET_STATES,i={},c={},l={"Content-type":"application/json"};n.sendGet(r,i,c,l,function(o){if(200==o.code){a.info("Get getStates: ",o.data);var t=[];a.info("largo: ",o.data.length);for(var r=0;r<o.data.length;r++)t.push(o.data[r]);s.setLocalStorageItem("states",t),e.resolve(t)}else{a.error("Error getStates: "+o.message);var t={};t.code=o.code,t.message=o.message,e.reject(t)}},function(o){a.error("Error getStates: "+o);var t={};o[0]?(t.code=o[0].errorCode,t.message=o[0].message):o.code?(t.code=o.code,t.message=o.message):o.data?(t.code=o.data.status,t.message=o.data.msg):(t.code="400",t.message=o),e.reject(t)})}return e.promise},pub.getAssetList=function(){a.info("$state:",c.current.name);var r=o.defer();if(s.getLocalStorageItem("asset_list"))r.resolve(s.getLocalStorageItem("asset_list"));else{var n={};n.path=t.ENDPOINTS_ASSESTS_LIST,n.method="GET",n.contentType="application/json",n.params={},n.data="",e.request(n).then(function(e){if("200"==e.code.toString()){a.info("getAssetList ",e.data);var o=[];null!=e.data&&e.data.length>0&&angular.forEach(e.data,function(e,t){a.info(t+" : ",e);var r={};r.index=t,r.direccion=e.direccion.direccion+" "+e.direccion.comuna,r.numeroSuministro=e.numeroSuministro,o.push(r)}),s.setLocalStorageItem("asset_list",o),r.resolve(o)}else{a.error("Error AssetList: ",e.message);var t={};t.code=e.code,t.message=e.message,r.reject(t)}},function(e){a.error("Error AssetList: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),r.reject(o)})}return r.promise},pub.getSubjectList=function(){var e=o.defer();if(s.getLocalStorageItem("subject_list"))e.resolve(s.getLocalStorageItem("subject_list"));else{var r=t.ENDPOINTS_BASE_EXTERNAL+t.ENDPOINTS_EXTERNAL_SUBJECT,i={},c={},l={"Content-type":"application/json"};n.sendGet(r,i,c,l,function(o){if("200"==o.code.toString())a.info("getAssetList ",o.data),s.setLocalStorageItem("subject_list",o.data),e.resolve(o.data);else{a.error("Error AssetList: ",o.message);var t={};t.code=o.code,t.message=o.message,e.reject(t)}},function(o){a.error("Error AssetList: ",o);var t={};o[0]?(t.code=o[0].errorCode,t.message=o[0].message):o.code?(t.code=o.code,t.message=o.message):o.data?(t.code=o.data.status,t.message=o.data.msg):(t.code="400",t.message=o),e.reject(t)})}return e.promise},pub}]),angular.module("CoreModule").factory("ProfileService",["ConnectionProvider","SalesforceProvider","$q","ENDPOINTS","$log","$ionicLoading","LocalStorageProvider","UTILS_CONFIG",function(e,o,t,a,r,s,n,i){return pub.updateUserData=function(e,c,l,d){var m=t.defer(),u={};return u.path=a.ENDPOINTS_EDIT_USER,u.method="POST",u.contentType="application/json",u.params={},u.data={bean:{checkNotifications:e,email:c,mobilePhone:l,homePhone:d}},s.show({template:i.STYLE_IONICLOADING_TEMPLATE}),o.request(u).then(function(o){if(s.hide(),"200"==o.code.toString()){r.info("updateUserData: ",o.message);var t=n.getLocalStorageItem("user_data");t.email=c,t.telefonoMovil=l,t.telefonoFijo=d,t.activarNotificaciones=e,n.setLocalStorageItem("user_data",t),m.resolve(o.message)}else{r.error("Error changePassword: ",o.message);var a={};a.code=o.code,a.message=o.message,m.reject(a)}},function(e){s.hide(),r.error("Error updateuserData: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),m.reject(o)}),m.promise},pub.changePassword=function(e,n){var c=t.defer(),l={};return l.path=a.ENDPOINTS_PASSWORD_CHANGE,l.method="POST",l.contentType="application/json",l.params={},l.data={bean:{newPassword:e,verifyNewPassword:n}},s.show({template:i.STYLE_IONICLOADING_TEMPLATE}),o.request(l).then(function(e){if(s.hide(),"200"==e.code.toString())r.info("changePassword:: ",e.message),c.resolve(e.message);else{r.error("Error changePassword: ",e.message);var o={};o.code=e.code,o.message=e.message,c.reject(o)}},function(e){s.hide(),r.error("Error changePassword: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),c.reject(o)}),c.promise},pub}]),angular.module("CoreModule").service("PopupService",["$ionicModal","$ionicLoading","$route","UTILS_CONFIG",function(e,o,t,a){return{openModal:function(r,s,n,i,c){var l="views/Modals/"+r+"Modal.html";c&&(i.closeModal=c),e.fromTemplateUrl(l,{scope:i,animation:"help"==r?"slide-in-up":"fade"}).then(function(e){o.hide(),i.modal=e,i.modal.title=s,i.modal.content=n,"iframe"===r||"payment"===r?(o.show({template:a.STYLE_IONICLOADING_TEMPLATE}),i.loadComplete=function(e){o.hide()},i.modal.show()):(i.modal.show(),o.hide(),t.reload())})}}}]),angular.module("CoreModule").service("DataMapService",function(){var e=[];return{setItem:function(o,t){if(o)return e[o]=t,t;throw"setItem: key and value is needed"},getItem:function(o,t){if(!o)throw"getItem: key is needed";if(void 0!==e[o])return e[o];if(t)return null;throw"Item not found"},deleteItem:function(o){if(!o)throw"deleteItem: key is needed";void 0!==e[o]&&delete e[o]}}}),angular.module("ContactModule").factory("ContactService",["ConnectionProvider","SalesforceProvider","$q","ENDPOINTS","$log","LocalStorageProvider",function(e,o,t,a,r,s){return{getBranchesItems:function(){var o=t.defer();if(s.getLocalStorageItem("branches"))o.resolve(s.getLocalStorageItem("branches"));else{var n=a.ENDPOINTS_BASE_EXTERNAL+a.ENDPOINTS_BRACNHES,i={},c={},l={"Content-type":"application/json"},d={},m=[],u=[];e.sendGet(n,i,c,l,function(e){if(200==e.code){r.info("Get Data: ",e);for(var t=0;t<e.data.length;t++){var a={index:t,titulo:e.data[t].titulo,tipo:e.data[t].tipo,latitud:e.data[t].latitud,longitud:e.data[t].longitud,direccion:e.data[t].direccion,detalle:e.data[t].detalle,horario_apertura:e.data[t].horaApertura,horario_pago:e.data[t].horaPago,horario_especial:e.data[t].horaEspecial,imagen:e.data[t].imagen};r.info("obj: ",a),"01"==a.tipo?m.push(a):u.push(a)}d.branches=m,d.paymentPlaces=u,s.setLocalStorageItem("branches",d),o.resolve(d)}else{r.error("Get Data: "+e.message);var a={};a.code=e.code,a.message=e.message,o.reject(a)}},function(e){r.error("Get Data: "+e);var t={};e[0]?(t.code=e[0].errorCode,t.message=e[0].message):e.code?(t.code=e.code,t.message=e.message):e.data?(t.code=e.data.status,t.message=e.data.msg):(t.code="400",t.message=e),o.reject(t)})}return o.promise},setContactForm:function(o,s,n,i,c,l,d,m,u){var g=t.defer(),f=a.ENDPOINTS_BASE_EXTERNAL+a.ENDPOINTS_EXTERNAL_SETCONTACT,p={bean:{numeroSuministro:o,asunto:s,rut:n,nombres:i,apellidoPaterno:c,apellidoMaterno:l,email:d,telefono:m,descripcion:u}},E={},_={"Content-type":"application/json"};return e.sendPost(f,E,p,_,function(e){if(200==e.code)r.info("Set Contact: ",e),g.resolve(e.data);else{r.error("Get Data: "+e.message);var o={};o.code=e.code,o.message=e.message,g.reject(o)}},function(e){r.error("Set Contact: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),g.reject(o)}),g.promise},setContactFormAuth:function(e,s,n){var i=t.defer(),c={};return c.path=a.ENDPOINTS_SETCONTACT,c.method="POST",c.contentType="application/json",c.data={bean:{numeroSuministro:e,asunto:s,descripcion:n}},c.params="",o.request(c).then(function(e){if("200"==e.code.toString())r.info("Set Contact Auth ",e.data),i.resolve(e.data);else{r.error("Error Set Contact Auth: ",e.message);var o={};o.code=e.code,o.message=e.message,i.reject(o)}},function(e){r.error("Error Set Contact Auth: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),i.reject(o)}),i.promise},geocodeLatLng:function(e,o){var a=t.defer(),s=new google.maps.Geocoder,n={lat:parseFloat(e),lng:parseFloat(o)};return s.geocode({location:n},function(e,o){"OK"===o?e[1]?a.resolve(e[1].formatted_address):r.error("No results found"):(r.error("Geocoder failed due to: "+o),a.reject(o))}),a.promise}}}]),angular.module("BillsModule").factory("BillsService",["$q","SalesforceProvider","ConnectionProvider","$log","ENDPOINTS","UTILS_CONFIG","$base64",function(e,o,t,a,r,s,n){return{setEnterReading:function(t,s,n,i,c){var l=e.defer(),d={};return d.path=r.ENDPOINTS_ENTER_READING,d.method="POST",d.contentType="application/json",d.data=null==s||""==s||null!=n&&""!=n&&null!=i&&""!=i&&null!=c&&""!=c?null!=s&&""!=s||null==n||""==n||null==i||""==i||null==c||""==c?{bean:{numeroSuministro:t}}:{bean:{numeroSuministro:t,lecturaDia:n,lecturaNoche:i,lecturaPunta:c}}:{bean:{numeroSuministro:t,lectura:s}},d.params="",o.request(d).then(function(e){if("200"==e.code.toString()){a.info("setEnterReading ",e.data);var o={};o.message=e.message,null!=e.data&&e.data.length>0&&(o.caseId=e.data.caseId),l.resolve(e)}else{a.error("Error AssetDetail: ",e.message);var t={};t.code=e.code,t.message=e.message,l.reject(t)}},function(e){a.error("Error AssetDetail: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),l.reject(o)}),l.promise},generateXmlPayment:function(o){var t=e.defer();o.montoUltimaBoleta===o.amount?o.paymentType=s.PAYMENT_PAYMENTTYPE_1:o.paymentType=s.PAYMENT_PAYMENTTYPE_2;var r=s.PAYMENT_TEMPLATE;a.info("template previo: ",r),r=r.replace("</banco>",s.PAYMENT_ID_BANK+"</banco>"),r=r.replace("</tipoPago>",o.paymentType+"</tipoPago>"),r=r.replace("</monto>",o.amount+"</monto>"),r=r.replace("</fechaVencimiento>",o.expirationDate+"</fechaVencimiento>"),r=r.replace("</fechaEmision>",o.issueDate+"</fechaEmision>"),r=r.replace("</fechaOnClick>",o.onClickDate+"</fechaOnClick>"),r=r.replace("</codigoBarra>",o.barcode+"</codigoBarra>"),r=r.replace("</empresa>",s.PAYMENT_ENTERPRISE+"</empresa>"),r=r.replace("</nombre>",o.name+ +o.lastName+"</nombre>"),r=r.replace("</rut>",o.rut+"</rut>"),r=r.replace("</mail>",o.email+"</mail>"),a.info("template post: ",r);var i=n.encode(r);return n.decode(i),i="deImg2h9+0A8oTAmKCcP9MCiQ+UzJb4xRBKQOUlRr4ardNVJi//mHBe7xcEs0GGy2y8SGLraBB9IWqcF64wUf1/tHqa++H1GgXzanvrcFA2FK8uB0x1f/P1qNqC8z47aRV6Pz5ITzidaIO2Q+qrlaH4vPyu9lYgvipWaQx7eYrT7LwLVtwHwWXg/xGKZFZqDcmCguzzn5ySZUF3A8nXkJEtYxWgPuA9csApi133PgbHqiSCzFQoaAs7XBfEiuonQccdlvQFReyohIKI9Cj9fOUq0Y82+LEomVKoZ/oslTf2Ngn3YtbplpkDHLGQ3RhBc3INMfIN2/X5cpMsYT8rqzwAzznX7vR0JyKZGwA+hh99FhXkOgnBEKah2P/r1+tZSSiNUC4Wyywc4mm5+aVfoWpD6l52NjwT2J3ZWGF+JpYRzuRXcb03hXIEcDVvOECA3Rpa+nYFbQVWf+Xndq+X0pw==",a.info("val: ",i),t.resolve(i),t.promise},setPayment:function(o){var i=e.defer();o.montoUltimaBoleta===o.amount?o.paymentType=s.PAYMENT_PAYMENTTYPE_1:o.paymentType=s.PAYMENT_PAYMENTTYPE_2;var c=s.PAYMENT_TEMPLATE;a.info("template previo: ",c),c=c.replace("</banco>",s.PAYMENT_ID_BANK+"</banco>"),c=c.replace("</tipoPago>",o.paymentType+"</tipoPago>"),c=c.replace("</monto>",o.amount+"</monto>"),c=c.replace("</fechaVencimiento>",o.expirationDate+"</fechaVencimiento>"),c=c.replace("</fechaEmision>",o.issueDate+"</fechaEmision>"),c=c.replace("</fechaOnClick>",o.onClickDate+"</fechaOnClick>"),c=c.replace("</codigoBarra>",o.barcode+"</codigoBarra>"),c=c.replace("</empresa>",s.PAYMENT_ENTERPRISE+"</empresa>"),c=c.replace("</nombre>",o.name+"</nombre>"),c=c.replace("</rut>",o.rut+"</rut>"),c=c.replace("</mail>",o.email+"</mail>"),a.info("template post: ",c);var l=n.encode(c);a.info("val: ",l);var d=n.decode(l);a.info("valDecode: ",d);var m=r.ENDPOINTS_PAYMENT,u={},g={val:"deImg2h9+0A8oTAmKCcP9MCiQ+UzJb4xRBKQOUlRr4ardNVJi//mHBe7xcEs0GGy2y8SGLraBB9IWqcF64wUf1/tHqa++H1GgXzanvrcFA2FK8uB0x1f/P1qNqC8z47aRV6Pz5ITzidaIO2Q+qrlaH4vPyu9lYgvipWaQx7eYrQ/lXXYy7wFG9TpsQWip5mjt0W+SyW3RBktsAjDV7X8dBRyy+UnF1IiF6CD+lTABJYliydI270PCnW257DurxcHXutxDpv4Vri0gkiMkCzIpXzWfDcold2zvfhKWGW/VC2Oy9UglalVzRTCwpZEpcHfRczn2D9eN/gFCEyTjp1jX3Saf1ntaYEo29Tj6ArwXB7BKhgzDbq/p48glGEBwi7kmDctcEIZjj2YOSyBchvpOrM18k3yyyMIu9dfbCA9xxlYICWCnsClW3WvtQc3N//BK8Uk8nlbw10TB9V01O7OxA=="},f={"Content-Type":"application/x-www-form-urlencoded"};return t.sendPostForm(m,u,g,f,function(e){a.info("Payment WebPay: ",e),i.resolve(e)},function(e){a.error("Error Payment WebPay: "+e),i.reject(e)}),i.promise}}}]);var AnalyticsModule=angular.module("AnalyticsModule",[]);angular.module("AnalyticsModule").value("googleAnalyticsId","UA-73813005-1"),angular.module("AnalyticsModule").factory("GoogleAnalytics",["$log",function(e){function o(t){void 0!==window.analytics?(window.analytics.trackView(t),e.log("Tracked pageview")):setTimeout(function(){o(t)},250)}function t(e,o,a){void 0!==window.analytics?window.analytics.trackEvent(e,o,a):setTimeout(function(){t(e,o,a)},250)}var a={};return a.analyticsRunning=!1,a.isMobile=function(){
return!("Macintosh"===navigator.userAgent.match(/Macintosh/i)||"Windows"===navigator.userAgent.match(/Windows/i)||"Unix"===navigator.userAgent.match(/Unix/i))},a.startAnalytics=function(){a.isMobile()&&(void 0!==window.analytics?(window.analytics.startTrackerWithId("UA-73813005-1"),window.analytics.debugMode(),a.analyticsRunning=!0):e.log("Analytics no inicializado"))},a.trackView=function(e){a.isMobile()?o(e):ga("send","screenview",{screenName:e})},a.trackEvent=function(o,r,s){s=s||"",a.isMobile()?t(o,r,s):(ga("send",{hitType:"event",eventCategory:o,eventAction:r,eventLabel:s}),e.log("Tracked event"))},a}]),angular.module("AnalyticsModule").factory("AnalyticsService",["AnalyticsProvider",function(e){return{evento:function(o,t){e.evento(o,t)},pantalla:function(o){e.pantalla(o)}}}]),angular.module("AccessModule").factory("AccessService",["ConnectionProvider","SalesforceProvider","$q","ENDPOINTS","$log","SALESFORCE_CONFIG","LocalStorageProvider","$rootScope",function(e,o,t,a,r,s,n,i){return pub={},pub.getCommercialData=function(o){var s=t.defer(),n=a.ENDPOINTS_BASE_EXTERNAL+a.ENDPOINTS_COMMERCIAL_DATA,i={numeroSuministro:o},c={},l={"Content-type":"application/json"};return e.sendGet(n,i,c,l,function(e){if(r.info("Get CommercialData: ",e),"200"==e.code.toString()){var o={};o.numeroSuministro=e.data.numeroSuministro,o.nombreSuministro=e.data.nombreSuministro,o.montoUltimaBoleta=e.data.montoUltimaBoleta,o.montoDeudaAnterior=e.data.montoDeudaAnterior,o.idSuministro=e.data.idSuministro,o.estadoSuministro=e.data.estadoSuministro,o.direccion=e.data.direccion.calle+" "+e.data.direccion.casa+" "+e.data.direccion.departamento+" "+e.data.direccion.comuna,r.info("obj: ",o),s.resolve(o)}else{r.error("Error CommercialData: "+e.message);var o={};o.code=e.code,o.message=e.message,s.reject(o)}},function(e){r.error("Error CommercialData: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),s.reject(o)}),s.promise},pub.getLoginAccess=function(e){var o=t.defer();if(e){var a=s.loginURL+"/services/oauth2/authorize?client_id="+s.appId+"&redirect_uri="+s.oauthCallbackURL+"&response_type=token&prompt=login",i=window.open(a,"_blank","location=no");i.addEventListener("loadstart",function(e){if("function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return 0===this.indexOf(e)}),e.url.startsWith(s.oauthCallbackURL)){r.info("oauth callback url"),e.url=decodeURIComponent(e.url);for(var t=e.url.substr(e.url.indexOf("#")+1),a={},c=t.split("&"),l=0;l<c.length;l++){var d=c[l].substr(0,c[l].indexOf("=")),m=c[l].substr(c[l].indexOf("=")+1);m=decodeURIComponent(m),a[d]=m}n.setLocalStorageItem("access_token",a.access_token),n.setLocalStorageItem("refresh_token",a.refresh_token),s.accessToken=a.access_token,s.refreshToken=a.refresh_token,n.setLocalStorageItem("SALESFORCE_CONFIG",s),o.resolve(s),i.close()}})}else force.login(function(e){var t=n.getLocalStorageItem("user_data").split("#")[1];t=decodeURIComponent(t);for(var a=t.split("&"),r=[],i=0;i<2;i++)r[a[i].split("=")[0]]=a[i].split("=")[1];void 0!==r.access_token&&null!==r.access_token&&void 0!==r.refresh_token&&null!==r.refresh_token?(n.setLocalStorageItem("access_token",r.access_token),n.setLocalStorageItem("refresh_token",r.refresh_token),s.accessToken=r.access_token,s.refreshToken=r.refresh_token,n.setLocalStorageItem("SALESFORCE_CONFIG",s),o.resolve(s)):o.reject("No access and refresh token")},function(e){r.error("Error LoginAccess: "+e);var t={};e[0]?(t.code=e[0].errorCode,t.message=e[0].message):e.code?(t.code=e.code,t.message=e.message):e.data?(t.code=e.data.status,t.message=e.data.msg):(t.code="400",t.message=e),o.reject(t)});return o.promise},pub.getLoginServices=function(o,i){var c=t.defer(),l=a.ENDPOINTS_BASE_EXTERNAL+a.ENDPOINTS_GET_USER_SESSION,d={userNumber:o,password:i},m={},u={"Content-type":"application/json"};return e.sendGet(l,d,m,u,function(e){if(r.info("Get User Session: ",e),"200"==e.code.toString()){var t={},l={};t.userId=e.data.userId,t.telefonoMovil=e.data.telefonoMovil,t.telefonoFijo=e.data.telefonoFijo,t.sessionId=e.data.sessionId,t.notificaciones=e.data.notificaciones,t.activarNotificaciones=e.data.activarNotificaciones,t.nombre=e.data.nombre,t.email=e.data.email,t.contactId=e.data.contactId,t.apellidoPaterno=e.data.apellidoPaterno,t.apellidoMaterno=e.data.apellidoMaterno,l.userNumber=o,l.password=i,n.setLocalStorageItem("access_token",t.sessionId),n.setLocalStorageItem("contact_id",t.contactId),n.setLocalStorageItem("user_data",t),n.setLocalStorageItem("login_data",l),s.accessToken=t.sessionId,s.loginURL=a.ENDPOINTS_SALESFORCE,s.proxyURL=a.ENDPOINTS_SALESFORCE,n.setLocalStorageItem("SALESFORCE_CONFIG",s),t.SALESFORCE_CONFIG=s,force.init(s),c.resolve(t)}else{r.error("Error CommercialData: "+e.message);var t={};t.code=e.code,t.message=e.message,c.reject(t)}},function(e){r.error("Error CommercialData: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),c.reject(o)}),c.promise},pub.getContactId=function(){var e=t.defer();if(n.getLocalStorageItem("contact_id"))e.resolve(n.getLocalStorageItem("contact_id"));else{var s={};s.path=a.ENDPOINTS_GET_CONTACT_ID,s.method="GET",s.contentType="application/json",s.params=null,s.data="",o.request(s).then(function(o){if("200"==o.code.toString())r.info("getContactId ",o.data),n.setLocalStorageItem("contact_id",o.data.idContact),e.resolve(o.data.idContact);else{r.error("Error AssetList: ",o.message);var t={};t.code=o.code,t.message=o.message,e.reject(t)}},function(o){r.error("Error AssetList: ",o);var t={};o[0]?(t.code=o[0].errorCode,t.message=o[0].message):o.code?(t.code=o.code,t.message=o.message):o.data?(t.code=o.data.status,t.message=o.data.msg):(t.code="400",t.message=o),e.reject(t)})}return e.promise},pub.getLogout=function(){try{force.discardToken();var e=[];e.push("branches"),e.push("no_session_client_number"),e.push("passTuto"),n.removeLocalStorageItemExcept(e),s.accessToken="",s.refreshToken="",i.isLogged=!1}catch(e){r.error("err: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),defer.reject(o)}},pub.changePasswordNoAuth=function(o,s,n,i){var c=t.defer(),l=a.ENDPOINTS_BASE_EXTERNAL+a.ENDPOINTS_EXTERNAL_CHANGE_PASS,d={bean:{rut:o,newPassword:s,verifyNewPassword:n,code:i.toString()}},m={},u={"Content-type":"application/json"};return e.sendPost(l,m,d,u,function(e){if(r.info("Get User Session: ",e),"200"==e.code.toString())c.resolve(e);else{r.error("Error changePasswordNoAuth: ",e.message);var o={};o.code=e.code,o.message=e.message,c.reject(o)}},function(e){r.error("Error changePasswordNoAuth: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),c.reject(o)}),c.promise},pub.requestPasswordChangeCode=function(o){var s=t.defer(),n=a.ENDPOINTS_BASE_EXTERNAL+a.ENDPOINTS_EXTERNAL_CODE_REQUEST,i={rut:o},c={},l={"Content-type":"application/json"};return e.sendGet(n,i,c,l,function(e){if(r.info("Get User Session: ",e),"200"==e.code.toString())s.resolve(e.data);else{r.error("Error requestPasswordChangeCode: ",e.message);var o={};o.code=e.code,o.message=e.message,s.reject(o)}},function(e){r.error("Error requestPasswordChangeCode: ",e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),s.reject(o)}),s.promise},pub.registerUser=function(o){var s=t.defer(),n=a.ENDPOINTS_BASE_EXTERNAL+a.ENDPOINTS_EXTERNAL_REGISTRY_USER,i={bean:o},c={},l={"Content-type":"application/json"};return e.sendPost(n,c,i,l,function(e){if(r.info("Get User Session: ",e),"200"==e.code.toString())s.resolve(e.data);else{r.error("Error registerUser: ",e.message);var o={};o.code=e.code,o.message=e.message,s.reject(o)}},function(e){r.error("Error changePasswordNoAuth: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),s.reject(o)}),s.promise},pub.validateUser=function(o,s){var n=t.defer(),i=a.ENDPOINTS_BASE_EXTERNAL+a.ENDPOINTS_EXTERNAL_ACTIVATE_ACCOUNT,c={bean:{verificationCode:s.toString(),userId:o}},l={},d={"Content-type":"application/json"};return e.sendPost(i,l,c,d,function(e){if(r.info("Get User Session: ",e),"200"==e.code.toString())n.resolve(e.data);else{r.error("Error registerUser: ",e.message);var o={};o.code=e.code,o.message=e.message,n.reject(o)}},function(e){r.error("Error changePasswordNoAuth: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),n.reject(o)}),n.promise},pub}]),angular.module("CoreModule").provider("SalesforceProvider",function(){return{$get:["$log","$q","ConnectionProvider","SALESFORCE_CONFIG",function(e,o,t,a){return{apexrest:function(t){var a=o.defer(),r=_.uniqueId();return e.info("Salesforce apexrest id::",r),force.apexrest(t,function(o){e.info("Success in Salesforce apexrest id::",r),a.resolve(o)},function(o){err[0]&&"INVALID_SESSION_ID"==err[0].errorCode||(e.error("Error in salesforce apexrest id::",r),e.error("error::",o),a.reject(o))}),a.promise},request:function(a){var r=o.defer(),s=_.uniqueId();return e.info("Salesforce request id::",s),force.request(a,function(o){e.info("Success in Salesforce request id::",s),r.resolve(o)},function(o){o[0]&&"INVALID_SESSION_ID"==o[0].errorCode?t._recoverySessionId().then(function(o){force.request(a,function(o){e.info("Success in Salesforce request id::",s),r.resolve(o)},function(o){e.error("Error in salesforce request id::",s),e.error("error::",o),r.reject(o)})},function(o){e.error("Error in salesforce request id::",s),e.error("error::",o),r.reject(o)}):(e.error("Error in salesforce request id::",s),e.error("error::",o),r.reject(o))}),r.promise}}}]}}),angular.module("CoreModule").provider("LocalStorageProvider",function(){return{$get:["$rootScope","$window",function(e,o){var t=function(e){var t=o.localStorage.getItem("Object_"+e);return t?JSON.parse(t):(t=o.localStorage.getItem(e))?t:null},a=function(e,t){if(!e)throw"Key must not be null";i(t)?o.localStorage.setItem("Object_"+e,JSON.stringify(t)):o.localStorage.setItem(e,t)},r=function(e){if(!e)throw"Key not found";if(o.localStorage.getItem(e)){if(o.localStorage.getItem("Object_"+e))throw"Key not found";o.localStorage.removeItem("Object_"+e)}else o.localStorage.removeItem(e)},s=function(e){if(e)for(var t in o.localStorage)if(t.trim().startsWith(e.trim()))o.localStorage.removeItem(t);else{if(!t.trim().startsWith("Object_"+e.trim()))throw"Key not found";o.localStorage.removeItem(t)}},n=function(e){if(e)for(var t in o.localStorage)-1==e.indexOf(t)?o.localStorage.removeItem(t):console.debug("no elimina la llave: ",t)},i=function(e){try{var o=JSON.parse(JSON.stringify(e));if(o&&"object"==typeof o)return!0}catch(e){}return!1};return{getLocalStorageItem:t,getAllLocalStorageItems:function(){for(var e in o.localStorage)console.log("localstorage: ",e)},setLocalStorageItem:a,removeLocalStorageItem:r,removeLocalStorageItemStartWithKey:s,removeLocalStorageItemExcept:n,clearLocalStorage:function(e){!0===e&&o.localStorage.clear()}}}]}}),angular.module("CoreModule").provider("ConnectionProvider",function(){var e=[];return Object.toparams=function(e){var o=[];for(var t in e)o.push(t+"="+encodeURIComponent(e[t]));return o.join("&")},{$get:["$rootScope","$http","$log","$q","ENDPOINTS","LocalStorageProvider","SALESFORCE_CONFIG",function(o,t,a,r,s,n,i){function c(){var e=r.defer(),o={};if(n.getLocalStorageItem("login_data")){var t=n.getLocalStorageItem("login_data");l(t.userNumber,t.password).then(function(o){e.resolve()},function(t){o.error=t.code,o.message=t.message,e.reject(o)})}else{var o={};o.code="400",o.message="NO SESSION_ID",e.reject(o)}return e.promise}function l(e,o){var t=r.defer(),c=s.ENDPOINTS_BASE_EXTERNAL+s.ENDPOINTS_GET_USER_SESSION,l={userNumber:e,password:o},d={},m={"Content-type":"application/json"},u={};return f(c,l,d,m,function(r){if(a.info("Get User Session: ",r),"200"==r.code.toString()){var c={};u.userId=r.data.userId,u.sessionId=r.data.sessionId,u.contactId=r.data.contactId,c.userNumber=e,c.password=o,n.setLocalStorageItem("access_token",u.sessionId),n.setLocalStorageItem("contact_id",u.contactId),n.setLocalStorageItem("user_data",u),n.setLocalStorageItem("login_data",c),i.accessToken=u.sessionId,i.loginURL=s.ENDPOINTS_SALESFORCE,i.proxyURL=s.ENDPOINTS_SALESFORCE,n.setLocalStorageItem("SALESFORCE_CONFIG",i),u.SALESFORCE_CONFIG=i,force.init(i),t.resolve(u)}else a.error("Error CommercialData: "+r.message),u.code=r.code,u.message=r.message,t.reject(u)},function(e){a.error("Error CommercialData: "+e);var o={};e[0]?(o.code=e[0].errorCode,o.message=e[0].message):e.code?(o.code=e.code,o.message=e.message):e.data?(o.code=e.data.status,o.message=e.data.msg):(o.code="400",o.message=e),t.reject(o)}),t.promise}var d=function(o,n,i,l,d,u,g){var f=_.uniqueId();a.debug("["+f+"] REQUEST "+g,o);var p=r.defer();p.promise.then(function(e){d(e)},function(e){u(e)});var E={method:g,responseType:"json",url:o,headers:l,params:n,data:JSON.stringify(i),timeout:s.SETUP.TIMEOUT};if(_.findIndex(e,E),!1)return!1;try{e.push(E),t(E).then(function(t){e=_.drop(e,E),a.groupCollapsed("["+f+"] RESULT REQUEST "+g.toUpperCase()+"["+o+"]"),a.debug("Params: ",n),a.debug("Data: ",i),a.debug("Response: ",t),a.groupEnd(),t=m(t),p.resolve(t.data)},function(r){e=_.drop(e,E),a.groupCollapsed("["+f+"] ERROR REQUEST "+g.toUpperCase()+" ["+o+"]"),a.error("Params: ",n),a.error("Data: ",i),a.error("Response: ",r),a.groupEnd(),r=m(r),r[0]&&"INVALID_SESSION_ID"==r[0].errorCode?c().then(function(r){t(E).then(function(t){e=_.drop(e,E),a.groupCollapsed("["+f+"] RESULT REQUEST "+g.toUpperCase()+"["+o+"]"),a.debug("Params: ",n),a.debug("Data: ",i),a.debug("Response: ",t),a.groupEnd(),t=m(t),p.resolve(t.data)},function(t){e=_.drop(e,E),a.groupCollapsed("["+f+"] ERROR REQUEST "+g.toUpperCase()+" ["+o+"]"),a.error("Params: ",n),a.error("Data: ",i),a.error("Response: ",t),a.groupEnd(),t=m(t),p.reject(t)})},function(e){p.reject(e)}):p.reject(r),p.reject(r)})}catch(e){p.reject(e)}return p.promise},m=function(e){return null==e.data?e=A:null==e.data.data&&null==e.data.code&&null==e.data.message&&(e=A),e},u=function(o,n,i,c,l,d,m){var u=_.uniqueId();a.debug("["+u+"] REQUEST "+m,o);var g=r.defer();g.promise.then(function(e){l(e)},function(e){d(e)});var f={method:m,url:o,headers:c,params:n,data:Object.toparams(i),timeout:s.SETUP.TIMEOUT};if(_.findIndex(e,f),!1)return!1;try{e.push(f),t(f).then(function(t){e=_.drop(e,f),a.groupCollapsed("["+u+"] RESULT REQUEST "+m.toUpperCase()+"["+o+"]"),a.debug("Params: ",n),a.debug("Data: ",i),a.debug("Response: ",t),a.groupEnd(),g.resolve(t.data)},function(t){e=_.drop(e,f),a.groupCollapsed("["+u+"] ERROR REQUEST "+m.toUpperCase()+" ["+o+"]"),a.error("Params: ",n),a.error("Data: ",i),a.error("Response: ",t),a.groupEnd(),null==t.data&&(t=A),g.reject(t)})}catch(e){g.reject(e)}return g.promise},g=function(e,o,t,a,r,s){d(e,o,t,a,r,s,"POST")},f=function(e,o,t,a,r,s){d(e,o,t,a,r,s,"GET")},p=function(e,o,t,a,r,s){d(e,o,t,a,r,s,"PUT")},E=function(e,o,t,a,r,s){d(e,o,t,a,r,s,"DELETE")},S=function(e,o,t,a,r,s){u(e,o,t,a,r,s,"POST")},A={data:{status:"599",msg:"Se alcanzó el tiempo máximo de espera",message:"Se alcanzó el tiempo máximo de espera",code:599},status:599,code:599,message:"Se alcanzó el tiempo máximo de espera"};return{sendPost:g,sendPut:p,sendDelete:E,sendGet:f,sendPostForm:S,_recoverySessionId:c}}]}}),angular.module("AnalyticsModule").factory("AnalyticsProvider",["$http","$cordovaDevice","$rootScope","ENDPOINTS","ANALYTICS_CONFIG",function(e,o,t,a,r){function s(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===o?t:3&t|8).toString(16)})}var n=s();return{evento:function(i,c){var l;try{l=o.getPlatform()}catch(e){l="Web"}n||(n=s());var d={method:"GET",url:a.ENDPOINTS_ANALYTICS,params:{cid:n,v:1,tid:r.ID_ANALYTICS,t:"event",an:r.APP_NAME,av:t.translation.VERSION_APP,aid:r.ID_APP,cs:l,ec:i,ea:c}};e(d)},pantalla:function(a){var r;try{r=o.getPlatform()}catch(e){r="Web"}n||(n=s());var i={method:"GET",url:endpoints.ENDPOINTS_ANALYTICS,params:{cid:n,v:1,tid:t.translation.ID_ANALYTICS,t:"screenview",an:t.translation.APP_NAME,av:t.translation.VERSION_APP,aid:t.translation.ID_APP,cs:r,cd:a,ua:t.analiticaUa}};e(i)}}}]),angular.module("CoreModule").factory("DebugFactory",["$window","$cordovaDevice",function(e,o){var t={create:!0},a=function(r){try{var s="iOS"===o.getPlatform()?cordova.file.dataDirectory:cordova.file.externalDataDirectory;e.resolveLocalFileSystemURL(s,function(e){e.getFile("enel-regional.report.txt",t,function(e){e.file(function(o){if(o.size<1e5){var t=new FileReader;t.onloadend=function(o){void 0===o.target.result&&null===o.target.result||(0===o.target.result.length?e.createWriter(function(e){var o="{{<><><>}}",t=o.replace("{{<><><>}}","{{<><><>}}"+r);e.seek(0),e.write(t)}):e.createWriter(function(e){e.seek(0);var t=o.target.result;t=t.replace("{{<><><>}}","{{<><><>}}"+r),e.write(t)}))},t.readAsText(o)}else e.remove(function(){a(r)},function(){})})},function(){})},function(){})}catch(e){}};return{put:function(){var e,o=new Date,t="";for(e in arguments)"object"==typeof arguments[e]?(t+="::Object|| ",t+=angular.toJson(arguments[e]),t+=" ||EndObject::"):t+=0===e?arguments[e]:arguments[e]+" ",0===e&&(t+=":|"+o.toString()+"|: ");t+="\n",a(t)}}}]),angular.module("appenel",["ionic","ngCordova","AccessModule","BillsModule","ContactModule","CoreModule","EmergencyModule","FeaturedModule","LocationsModule","ProfileModule","UsageModule","NotificationsModule","AnalyticsModule","ui.router","ngMessages","platanus.rut","chart.js","ngOnload","base64"]),angular.module("appenel").config(["$stateProvider","$urlRouterProvider",function(e,o){e.state("tutorial",{url:"/tutorial",templateUrl:"views/Core/tutorial.html",controller:"tutorialCtrl"}).state("landing",{controller:"landingCtrl"}).state("guest",{url:"/guest",templateUrl:"views/Core/Footers/guestFooter.html",abstract:!0,controller:"footerCtrl"}).state("guest.home",{url:"/home",views:{"tab-home":{templateUrl:"views/Access/home.html",controller:"homeCtrl"}}}).state("guest.login",{url:"/login",cache:!1,views:{"tab-home":{templateUrl:"views/Access/login.html",controller:"loginCtrl"}}}).state("guest.register",{url:"/register",views:{"tab-home":{templateUrl:"views/Access/register.html",controller:"registerCtrl"}}}).state("guest.validation",{url:"/validation",views:{"tab-home":{templateUrl:"views/Access/validation.html",controller:"validationCtrl"}}}).state("guest.verification",{url:"/verification",views:{"tab-home":{templateUrl:"views/Access/verification.html",controller:"verificationCtrl"}}}).state("guest.verificationPass",{url:"/verificationPass",views:{"tab-home":{templateUrl:"views/Access/verificationPass.html",controller:"verificationPassCtrl"}}}).state("guest.payBill",{url:"/payBill",views:{"tab-home":{templateUrl:"views/Bills/payBill.html",controller:"payBillCtrl"}}}).state("guest.emergency",{url:"/emergency",views:{"tab-emergency":{templateUrl:"views/Emergency/menu.html",controller:"emergencyCtrl"}}}).state("guest.lightingProblems",{url:"/lightingProblems",views:{"tab-emergency":{templateUrl:"views/Emergency/lightingProblems.html",controller:"lightingProblemsCtrl"}}}).state("guest.blackout",{url:"/blackout",views:{"tab-emergency":{templateUrl:"views/Emergency/blackout.html",controller:"blackoutCtrl"}}}).state("guest.preBlackout",{url:"/preBlackout",views:{"tab-emergency":{templateUrl:"views/Emergency/preBlackout.html",controller:"preBlackoutCtrl"}}}).state("guest.accidentRisk",{url:"/accidentRisk",views:{"tab-emergency":{templateUrl:"views/Emergency/accidentRisk.html",controller:"accidentRiskCtrl"}}}).state("guest.contact",{url:"/contact",views:{"tab-contact":{templateUrl:"views/Contact/menu.html",controller:"menuContactCtrl"}}}).state("guest.contactForm",{url:"/contactForm",views:{"tab-contact":{templateUrl:"views/Contact/contactForm.html",controller:"contactFormCtrl"}}}).state("guest.branchesMap",{url:"/branchesMap",views:{"tab-contact":{templateUrl:"views/Contact/branchesMap.html",controller:"branchesMapCtrl"}}}).state("guest.branchesList",{url:"/branchesList",views:{"tab-contact":{templateUrl:"views/Contact/branchesList.html",controller:"branchesListCtrl"}}}).state("guest.branchesDescription",{url:"/branchesDescription",views:{"tab-contact":{templateUrl:"views/Contact/branchesDescription.html",controller:"branchesDescriptionCtrl"}}}).state("guest.paymentOptions",{url:"/paymentOptions",views:{"tab-contact":{templateUrl:"views/Contact/paymentOptions.html",controller:"branchesMapCtrl"}}}).state("guest.featured",{url:"/featured",views:{"tab-featured":{templateUrl:"views/Featured/featured.html",controller:"featuredCtrl"}}}).state("guest.featuredDescription",{url:"/featuredDescription",views:{"tab-featured":{templateUrl:"views/Featured/featuredDescription.html",controller:"featuredDescriptionCtrl"}}}).state("session",{url:"/session",abstract:!0,templateUrl:"views/Core/Footers/sessionFooter.html",controller:"footerCtrl"}).state("session.usage",{url:"/usage",views:{"tab-usage":{templateUrl:"views/Usage/mainContainer.html",controller:"usageCtrl"}}}).state("session.enterReading",{url:"/enterReading",views:{"tab-usage":{templateUrl:"views/Bills/enterReading.html",controller:"enterReadingCtrl"}}}).state("session.payBill",{url:"/payBill",views:{"tab-usage":{templateUrl:"views/Bills/payBill.html",controller:"payBillCtrl"}}}).state("session.emergency",{url:"/emergency",views:{"tab-emergency":{templateUrl:"views/Emergency/menu.html",controller:"emergencyCtrl"}}}).state("session.lightingProblems",{url:"/lightingProblems",views:{"tab-emergency":{templateUrl:"views/Emergency/lightingProblems.html",controller:"lightingProblemsCtrl"}}}).state("session.blackout",{url:"/blackout",views:{"tab-emergency":{templateUrl:"views/Emergency/blackout.html",controller:"blackoutCtrl"}}}).state("session.accidentRisk",{url:"/accidentRisk",views:{"tab-emergency":{templateUrl:"views/Emergency/accidentRisk.html",controller:"accidentRiskCtrl"}}}).state("session.contact",{url:"/contact",views:{"tab-contact":{templateUrl:"views/Contact/menu.html",controller:"menuContactCtrl"}}}).state("session.contactForm",{url:"/contactForm",views:{"tab-contact":{templateUrl:"views/Contact/contactForm.html",controller:"contactFormCtrl"}}}).state("session.branchesMap",{url:"/branchesMap",views:{"tab-contact":{templateUrl:"views/Contact/branchesMap.html",controller:"branchesMapCtrl"}}}).state("session.branchesList",{url:"/branchesList",views:{"tab-contact":{templateUrl:"views/Contact/branchesList.html",controller:"branchesListCtrl"}}}).state("session.branchesDescription",{url:"/branchesDescription",views:{"tab-contact":{templateUrl:"views/Contact/branchesDescription.html",controller:"branchesDescriptionCtrl"}}}).state("session.paymentOptions",{url:"/paymentOptions",views:{"tab-contact":{templateUrl:"views/Contact/paymentOptions.html",controller:"branchesMapCtrl"}}}).state("session.notifications",{url:"/notifications",views:{"tab-notifications":{templateUrl:"views/Notifications/notifications.html",controller:"notificationsCtrl"}}}).state("session.featured",{url:"/featured",views:{"tab-featured":{templateUrl:"views/Featured/featured.html",controller:"featuredCtrl"}}}).state("session.featuredDescription",{url:"/featuredDescription",views:{"tab-featured":{templateUrl:"views/Featured/featuredDescription.html",controller:"featuredDescriptionCtrl"}}}).state("session.profile",{url:"/profile",views:{profile:{templateUrl:"views/Core/profile.html",controller:"profileCtrl"}}})}]),angular.module("appenel").config(["$provide",function(e){e.decorator("$interval",["$delegate","$rootScope",function(e,o,t){var a=function(){var t=arguments,a=Function.prototype.bind.call(e),r=a.apply(e,t);o.$on("$App.pause",function(){e.cancel(r)}),o.$on("$App.resume",function(){a=Function.prototype.bind.call(e),r=a.apply(e,t)})};return a.cancel=e.cancel,a}])}]).config(["$provide",function(e){e.decorator("numberFilter",["$delegate","$locale",function(e){return function(o,t){var a=parseFloat(o,t);return _.isNaN(a)?_.isString(o)?o:void 0:e(o,t)}}])}]).config(["$provide",function(e){e.decorator("dateFilter",["$delegate",function(e){return function(e,o,t){var a=moment().utcOffset();if(t||(a=moment().utcOffset())<=0&&(a*=-1),"string"==typeof e&&e.indexOf("/")>=0){var r=moment(e.replace(/\//g,"-"),"DD/MM/YYYY").utcOffset(a).format(o);return"Invalid Date"!=r?r:e}var s=moment(new Date(e)).utcOffset(a).format(o);return"Invalid Date"!=moment(s).utcOffset(a)&&"Invalid Date"==(s=new Date(e))?e:moment(s).utcOffset(a).format(o)}}])}]).config(["$provide",function(e){e.decorator("$log",["$delegate","DebugFactory",function(e,o){var t="color: #6372C9; font-family: sans-serif; font-weight: bold; font-style: italic;",a="color: #00BDFF; font-family: sans-serif; font-weight: bold;",r="color: #5D6662; font-family: sans-serif; font-style: italic;";return window.onerror=e.fatal=function(e,t,r,s,n){window.console.groupCollapsed("%cFATAL: "+e,"color: red; font-family: sans-serif; font-weight: bold;"),window.console.info("%cARCHIVO: ",a,t+":"+r+":"+s),window.console.error("%cDETALLE: ",a,n.stack),window.console.groupEnd();var i=["[FATAL]",e,t+":"+r+":"+s,n.stack];Function.prototype.bind.call(o.put,o).apply(o.put,i)},e.trace=function(){var e=["%cTRACE:","color: #3DBF9F; font-family: sans-serif; font-weight: bold; font-style: italic;"],t=Array.prototype.slice.call(arguments);e.push(t),e=_.flattenDeep(e),Function.prototype.bind.call(window.$log.debug,console).apply(window.$log.debug,e);var a=["[TRACE]"];a.push(t),a=_.flattenDeep(a),Function.prototype.bind.call(o.put,o).apply(o.put,a)},e.log=function(){var e=["%cLOG:","color: #404040; font-family: sans-serif; font-weight: bold;"],t=Array.prototype.slice.call(arguments);e.push(t),e=_.flattenDeep(e),Function.prototype.bind.call(window.$log.debug,console).apply(window.$log.debug,e);var a=["[LOG]"];a.push(t),a=_.flattenDeep(a),Function.prototype.bind.call(o.put,o).apply(o.put,a)},e.warn=function(){var e=["%cWARNING:","color: #FFD84B; font-family: sans-serif; font-weight: bold; font-style: italic;"],t=Array.prototype.slice.call(arguments);e.push(t),e=_.flattenDeep(e),Function.prototype.bind.call(window.console.warn,console).apply(window.console.warn,e);var a=["[WARNING]"];a.push(t),a=_.flattenDeep(a),Function.prototype.bind.call(o.put,o).apply(o.put,a)},e.debug=function(){var e=["%cDEBUG:",t],a=Array.prototype.slice.call(arguments);e.push(a),e=_.flattenDeep(e),Function.prototype.bind.call(window.console.debug,console).apply(window.console.debug,e);var r=["[DEBUG]"];r.push(a),r=_.flattenDeep(r),Function.prototype.bind.call(o.put,o).apply(o.put,r)},e.info=function(){var e=["%cINFO:",a],t=Array.prototype.slice.call(arguments);e.push(t),e=_.flattenDeep(e),Function.prototype.bind.call(window.console.info,console).apply(window.console.info,e);var r=["[INFO]"];r.push(t),r=_.flattenDeep(r),Function.prototype.bind.call(o.put,o).apply(o.put,r)},e.debugTitle=function(){var e=["%c"+arguments[0],t],a=Array.prototype.slice.call(arguments);a.splice(0,1),e.push(a),e=_.flattenDeep(e),Function.prototype.bind.call(window.console.debug,console).apply(window.console.debug,e);var r=["["+arguments[0]+"]"];r.push(a),r=_.flattenDeep(r),Function.prototype.bind.call(o.put,o).apply(o.put,r)},e.error=function(){var e=["%cERROR:","color: #E64E30; font-family: sans-serif; font-weight: bold;"],t=Array.prototype.slice.call(arguments);t[0].stack&&(t[0]=t[0].stack),e.push(t),e=_.flattenDeep(e),Function.prototype.bind.call(window.console.error,console).apply(window.console,e);var a=["[ERROR]"];a.push(t),a=_.flattenDeep(a),Function.prototype.bind.call(o.put,o).apply(o.put,a)},e.group=function(e){var t=["%c"+e,r];t=_.flattenDeep(t),Function.prototype.bind.call(window.console.group,console).apply(window.console.group,t);var a=["*** [DEBUG GROUP]",e];Function.prototype.bind.call(o.put,o).apply(o.put,a)},e.groupCollapsed=function(e){var t=["%c"+e,r];t=_.flattenDeep(t),Function.prototype.bind.call(window.console.groupCollapsed,console).apply(window.console.groupCollapsed,t);var a=["*** [DEBUG GROUP]",e];Function.prototype.bind.call(o.put,o).apply(o.put,a)},e.groupEnd=function(){Function.prototype.bind.call(window.console.groupEnd,console).apply(window.console.groupEnd,arguments),Function.prototype.bind.call(o.put,o).apply(o.put,["*** [GROUP END]"])},e}])}]).config(["$ionicConfigProvider",function(e){e.tabs.position("bottom")}]),angular.module("appenel").run(["$rootScope","$log","$ionicPlatform","$state","$window","SALESFORCE_CONFIG","translation_es","LocalStorageProvider","ContactService","$location","$route","UTILS_CONFIG",function(e,o,t,a,r,s,n,i,c,l,d,m){e.translation=n,e.isLogged=!1,o.debug("$rootScope.isLogged: "+e.isLogged),e.isMovilDevice=!1,window.cordova?(o.debug("dispositivo movil"),s.oauthCallbackURL="http://localhost/oauthcallback.html",isMovilDevice=!0,window.open=cordova.InAppBrowser.open):(o.debug("web"),s.oauthCallbackURL="http://localhost:8100/oauthcallback.html",isMovilDevice=!1),i.getLocalStorageItem("SALESFORCE_CONFIG",!1)?force.init(i.getLocalStorageItem("SALESFORCE_CONFIG",!1)):force.init(s),t.ready(function(){try{TestFairy.begin("5bd10c0da3a67fda56ea3218175f260b96f49d0b"),o.debug("TestFairy initialized. API Key::5bd10c0da3a67fda56ea3218175f260b96f49d0b")}catch(e){o.debug("TestFairy is not defined for this Platform")}r.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),cordova.plugins.Keyboard.disableScroll(!1)),r.StatusBar&&StatusBar.styleDefault(),navigator.geolocation.getCurrentPosition(function(e){o.debug("position adquired")}),i.getLocalStorageItem("branches")||c.getBranchesItems().then(function(e){o.debug("markers: ",e)}),o.debug("autenticated: ",force.isAuthenticated()),i.getLocalStorageItem("passTuto")?force.isAuthenticated()?(e.isLogged=!0,a.go("session.usage")):(e.isLogged=!1,a.go("guest.home")):a.go("tutorial")}),t.on("pause",function(t){o.debug("Pause Fired");var a=[];a.push("Object_branches"),a.push("no_session_client_number"),a.push("passTuto"),force.isAuthenticated()?(e.isLogged=!0,a.push("contact_id"),a.push("Object_SALESFORCE_CONFIG"),a.push("Object_user_data"),a.push("Object_login_data"),i.removeLocalStorageItemExcept(a),i.setLocalStorageItem("passTuto",!0)):i.removeLocalStorageItemExcept(a)}),t.on("resume",function(t){o.debug("Resume Fired"),force.isAuthenticated()&&(e.isLogged=!0,s.accessToken=i.getLocalStorageItem("access_token",!1),s.refreshToken=i.getLocalStorageItem("refresh_token",!1),i.setLocalStorageItem("SALESFORCE_CONFIG",s),force.init(i.getLocalStorageItem("SALESFORCE_CONFIG",!1)))})}]),angular.module("ProfileModule",["CoreModule"]),angular.module("NotificationsModule",["CoreModule"]),angular.module("appenel").constant("translation_es",{HOME:"Inicio",LOGIN:"Ingresar",LOGIN_FACEBOOK:"Ingresar con Facebook",LOGOUT:"Cerrar Sesión",LOGOUT_DESCRIPTION:"Cerrar Sesión descripción...",WELCOME:"Bienvenido",ACCEPT:"Aceptar",CANCEL:"Cancelar",NEXT:"Siguiente",CONTINUE:"Continuar",GO:"Ir",BACK:"Volver",SAVE:"Guardar",REGISTER:"Registro",CONTACT:"Contacto",THANKS:"Gracias",PROFILE:"Perfil",CURRENT:"Actual",PREVIOUS:"Anterior",PAYMENT:"Pagos",ATTENTION:"Atención",COMMUNITIES:"Comunidades",MAP:"Mapa",LIST:"Lista",ALERT:"Alerta",ALERTS:"Alertas",EMAIL:"Email",
SEND:"Enviar",SEND_CODE_AGAIN:"Reenviarme el código",CONSULT:"Consultar",SEE_MORE:"Ver Más",CLOSE:"Cerrar",HELP:"Ayuda",DATE:"Fecha",TYPE:"Tipo",DOWNLOAD:"Descargar",INFO:"Información",NO_DATA:"No hay datos",NO_ACTIVE_DEBT:"El suministro no tiene una deuda activa",VERSION_APP:"1.0.0",CHANGE_VERSION:"Actualización disponible",MSG_CHANGE_VERSION_1:"Hay una nueva versión en el Store.",MSG_CHANGE_VERSION_2:"Recomendamos actualizar.",GO_STORE:"Ir a la Tienda",LABEL_NUM_CLIENT:"Ingresar N° de cliente",PLACEHOLDER_NUM_CLIENT:"Ej. 33663355-K",SEARCH_NUM_CLIENT:"Buscar N° cliente",CHECK_OR_PAY_ACCOUNT:"Pagar cuenta",REPORT_COURT:"Reportar corte",FORGOT_PASS:"Olvidé mi contraseña",SEE_YOU_SOON:"Hasta pronto",THANKS_YOR_VISITING_US:"Gracias por visitarnos",CREATE_ACCOUNT:"Crear Cuenta",LABEL_RUT:"Ingresar Rut",LABEL_NAME:"Ingresar Nombre",LABEL_NAMES:"Ingresar Nombres",LABEL_LASTNAME:"Ingresar Apellido Paterno",LABEL_MOTHER_LASTNAME:"Ingresar Apellido Materno",LABEL_LASTNAMES:"Ingresar Apellidos",LABEL_PHONE:"Ingresar Teléfono fijo",LABEL_CELLPHONE:"Ingresar Teléfono celular",LABEL_EMAIL:"Ingresar Email",LABEL_ALIAS:"Ingresar Alias",LABEL_ALIAS_ASSET:"Ingresar Alias Suministro",LABEL_NUM_LAST_SERVICE:"Ingresar N° de última boleta emitida",LABEL_PASSWORD:"Ingresar Contraseña",LABEL_PASSWORD_CONFIRM:"Favor confirmar contraseña",PLACEHOLDER_RUT:"Ej: 12345678-9",PLACEHOLDER_NAME:"Nombre",PLACEHOLDER_NAMES:"Nombres",PLACEHOLDER_LASTNAME:"Apellido Paterno",PLACEHOLDER_MOTHER_LASTNAME:"Apellido Materno",PLACEHOLDER_LASTNAMES:"Apellidos",PLACEHOLDER_PHONE:"Ej: +56 2 2345678",PLACEHOLDER_CELLPHONE:"Ej: +56 9 87654321",PLACEHOLDER_EMAIL:"Ej: usuario@correo.com",PLACEHOLDER_ALIAS:"Alias",PLACEHOLDER_ALIAS_ASSET:"Alias Suministro",PLACEHOLDER_NUM_LAST_SERVICE:"Ej: 987654321",PLACEHOLDER_PASSWORD:"Contraseña",PLACEHOLDER_PASSWORD_CONFIRM:"Confirmar contraseña",ACCEPT_TERMS:"Acepto términos y condiciones",REQUIRED_FORM_TEXT:"(*) Estos campos son obligatorios",VALIDATE_ACCOUNT:"Validar Cuenta",ACTIVATE_ACCOUNT:"Activar Cuenta",LABEL_INSERT_CODE:"Ingresar código",PLACEHOLDER_INSERT_CODE:"Código",PASSWORD_RECOVERY:"Recuperar Clave",RECOVERY_PASS_TEXT:"Para recuperar tu clave, primero debes validar tu cuenta con un código de seguridad, luego podrás cambiar tu clave.",SEND_ME_CODE:"Enviar código",GENERATE_NEW_CODE:"Generar un nuevo código",LABEL_ENTER_USER:"Ingresar usuario (rut)",LABEL_ENTER_CODE:"Ingresar código",PLACEHOLDER_ENTER_USER:"Usuario",PLACEHOLDER_ENTER_CODE:"Código",VALIDATE_CODE:"Validar código",MY_CURRENT_PASS:"Mi contraseña actual",CHANGE_YOUR_PASS:"Cambiar clave",LABEL_ENTER_NEW_PASS:"Ingresar nueva clave",LABEL_REPEAT_NEW_PASS:"Repetir nueva clave",PLACEHOLDER_ENTER_NEW_PASS:"Nueva clave",PLACEHOLDER_REPEAT_NEW_PASS:"Repetir nueva clave",OVERVIEW:"Resumen",USAGES:"Consumos",BILLS:"Boletas",PAYMENTS:"Pagos",PAY_ACCOUNT:"Pagar cuenta",SEND_READING:"Enviar lectura",OUTSTADING_DEBT:"Deuda Vigente",EXPIRATION:"Vencimiento",RATE:"Tarífa",CUTOFF_DATE:"Fecha de Corte",LAST_PAYMENT_AMOUNT:"Monto último pago",LAST_PAYMENT_DATE:"Fecha último pago",NEXT_READING_DATE:"Fecha proxima lectura",ACTUAL_READING:"Lectura actual",USAGE_MONTH:"Consumo mes",ENTER_READING_DISCLAIMER:"Disclaimer ingreso de lectura...",LABEL_ENTER_READING:"Ingresar Lectura",LABEL_READING:"Lectura",LABEL_READING_DAY:"Ingresar lectura día",LABEL_READING_NIGHT:"Ingresar lectura noche",LABEL_READING_PEAK:"Ingresar lectura punta",PLACEHOLDER_ENTER_READING:"Ingresar Lectura",PLACEHOLDER_READING:"Lectura",PLACEHOLDER_READING_DAY:"Consumo día",PLACEHOLDER_READING_NIGHT:"Consumo noche",PLACEHOLDER_READING_PEAK:"Consumo punta",PAY_ACCOUNT_DISCLAIMER:"Disclaimer paga tu cuenta...",PAY_YOUR_BILL:"Paga tu cuenta",PAY:"Pagar",TYPE_OF_DEBT:"Tipo de Deuda",AMOUNT:"Monto",PREVIOUS_DEBT:"Deuda Anterior",LAST_BILL:"Última Boleta Emitida",EMERGENCIES:"Emergencias",BLACKOUT:"Corte de Luz",BLACKOUT_DESCRIPTION:"Descripción de corte de luz",BLACKOUT_DISCLAIMER:"Disclaimer corte de luz",LIGHTING_PROBLEMS:"Alumbrado público",LIGHTING_PROBLEMS_DESCRIPTION:"Descripción de problemas de alumbrado",LIGHTING_PROBLEMS_DISCLAIMER:"Disclaimer problemas de alumbrado",RISK_OR_ACCIDENT:"Riesgo o Accidente",RISK_OR_ACCIDENT_DESCRIPTION:"Descripción de riesgo o accidente",RISK_OR_ACCIDENT_DISCLAIMER:"Disclaimer riesgo o accidente",REPORT_EMERGENCY:"Reportar Emergencia",BLACKOUT_AT_HOME:"Mi casa no tiene luz",BLACKOUT_AT_NEIGHBORHOOD:"Mi barrio no tiene luz",LABEL_DESCRIBE_THE_INCIDENT:"Observaciones",PLACEHOLDER_DESCRIBE_THE_INCIDENT:"Ingresar observaciones...",LABEL_TYPE_OF_PROBLEM:"Tipo de anormalidad",LABEL_STREET:"Calle",LABEL_NUMBER:"Número",LABEL_DEPARTAMENT:"Departamento",LABEL_STATE:"Comuna",PLACEHOLDER_TYPE_OF_PROBLEM:"Tipo de anormalidad",PLACEHOLDER_STREET:"Calle",PLACEHOLDER_NUMBER:"Número",PLACEHOLDER_DEPARTAMENT:"Departamento",PLACEHOLDER_STATE:"Comuna",CONTACT:"Contacto",INFORMATION_SERVICES:"Fonoservicio",INFORMATION_SERVICES_DESCRIPTION:"Fonoservicio descripción...",CALL:"Llamar",CONTACT_FORM:"Formulario de contacto",CONTACT_FORM_DESCRIPTION:"Formulario de contacto descripción...",WRITE_US:"Escríbenos",NEARBY_BRANCHES:"Sucursales y lugares de pago",NEARBY_BRANCHES_DESCRIPTION:"Sucursales y lugares de pago descripción...",SEE_LOCATION:"Ver Ubicación",LABEL_TOPIC:"Seleccionar asunto",PLACEHOLDER_TOPIC:"Asunto",LABEL_MESSAGE:"Ingresar mensaje",PLACEHOLDER_MESSAGE:"Mensaje...",BRANCHES:"Sucursales",SERVICE_CENTERS:"Centros de Servicios",POINTS_OF_ATTENTION_AND_PAYMENT:"Puntos de Atención y Pagos",PLACES_OF_PAYMENT:"Lugares de Pago",SEARCH_PLACE:"Buscar...",ALSO_PAY_IN:"También paga en",OTHER_MEANS_OF_PAYMENT:"Otros medios de Pago",COMMERCIAL_ATTENTION:"Atención Comercial",MAP_WITH_GPS:"Mapa con Geolocalización",PAYMENT_HOURS:"Horarios de Pago",OPENING_HOURS:"Horarios de Apertura",SPECIAL_HOURS:"Horarios Especiales",ERROR_FIND_GEOCODE:"Imposible encontrar la ubicacion por la siguiente razón: ",MUST_NOT_EMPTY:"El campo no puede estar vacio",PAYMENT_OPTIONS_01_BRAND:"Western Union",PAYMENT_OPTIONS_01_TEXT:"Ahora también puedes pagar en la red de agentes de Western Union. 400 oficinas a tu disposición.",PAYMENT_OPTIONS_02_BRAND:"Full Carga",PAYMENT_OPTIONS_02_TEXT:"Es una red de pagos que podrás encontrar en tu bodega, cabina o farmacia más cercana, y donde ahora podrás pagar tu recibo.",PAYMENT_OPTIONS_03_BRAND:"Pagaltoke",PAYMENT_OPTIONS_03_TEXT:"Paga tu recibo en tu bodega, cabina o farmacia más cercana.",PAYMENT_OPTIONS_04_BRAND:"BCP",PAYMENT_OPTIONS_04_TEXT:"Con BCP, paga tu recibo a través de Internet, débito automático y teléfono. Y a través de telecréditos sólo para empresas.",PAYMENT_OPTIONS_05_BRAND:"Scotiabank",PAYMENT_OPTIONS_05_TEXT:"Paga tu recibo a través de Internet, débito automático y teléfono.",PAYMENT_OPTIONS_06_BRAND:"BBVA Continental",PAYMENT_OPTIONS_06_TEXT:"Paga tu recibo a través de Internet, débito automático y cajeros automáticos.",PAYMENT_OPTIONS_07_BRAND:"Interbank",PAYMENT_OPTIONS_07_TEXT:"Paga tu recibo a través de Internet y débito automático.",PAYMENT_OPTIONS_08_BRAND:"Banco Financiero",PAYMENT_OPTIONS_08_TEXT:"Paga tu recibo a través de Internet y ventanilla.",PAYMENT_OPTIONS_09_BRAND:"Banco de Comercio",PAYMENT_OPTIONS_09_TEXT:"Paga tu recibo a través de Internet y ventanilla.",PAYMENT_OPTIONS_10_BRAND:"BanBif",PAYMENT_OPTIONS_10_TEXT:"Paga tu recibo a través de Internet y ventanilla.",PAYMENT_OPTIONS_11_BRAND:"Banco Falabella",PAYMENT_OPTIONS_11_TEXT:"Paga tu recibo a través de Internet y ventanilla.",PAYMENT_OPTIONS_12_BRAND:"Movistar",PAYMENT_OPTIONS_12_TEXT:"Puedes cancelar tu recibo en las oficinas de Movistar.",PAYMENT_OPTIONS_13_BRAND:"Sedapal",PAYMENT_OPTIONS_13_TEXT:"Puedes cancelar tu recibo en las oficinas de Sedapal.",ACTIVATE_NOTIFICATIONS:"Activar Notificaciones",ALIAS_EDITION:"Editar Alias",EDIT_ALIAS:"Editar Alias",NEW_ALIAS_EDITION_PLACEHOLDER:"Ingresar nuevo alias para el suministro",NOTIFICATIONS:"Notificaciones",FEATURED:"Destacados",TUTORIAL_01_TEXT:"Recibe alertas sobre tu ",TUTORIAL_0101_TEXT:"servicio eléctrico",TUTORIAL_02_TEXT:"Ubica tu punto de atención ",TUTORIAL_0202_TEXT:"más cercano",TUTORIAL_03_TEXT:"Ten a la mano la información ",TUTORIAL_0303_TEXT:"de tu recibo",TUTORIAL_04_TEXT:"",KNOW_YOUR_PRODUCTS:"Conoce los productos que tienes asociados a tu cuenta",SKIP_INTRO:"Saltar Intro",EASY_ACCESS_APP_TEXT:"Accede facilmente a lo más importante de la aplicación",KNOW_CUSTOMER_SERVICE_TEXT:"Podrás conocer los puntos de pagos más cercanos a ti",BRANCH_OFFICES_INFORMATION_TEXT:"Y saber información de las sucursales",SELECT_APP:"Seleccionar aplicación",SELECT_APP_TEXT:"Selecciona una aplicación para dirigirte al punto seleccionado.",NAMEAPP_001:"Google Maps",NAMEAPP_002:"Waze",ELECTRIC_LIGHTING:"Alumbrado",EMERGENCY:"Emergencia",ELECTRIC_LIGHTING_TITLE:"Declarar alerta",ERROR:"Error",SERVICES_ERROR:"En estos momentos no es posible procesar la solicitud, por favor inténtalo más tarde.",OTHER_ERROR:"No fue posible procesar la solicitud, por favor intenta más tarde.",SEARCH_USER_ERROR:"Error al buscar usuario. Verifica e intenta nuevamente.",LOREM_IPSUM_TEXT:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",VALIDATION_REQUIRED:"Este campo es requerido",VALIDATION_MIN_LENGTH:"El campo ingresado es demasiado corto",VALIDATION_MAX_LENGTH:"El campo ingresado es demasiado largo",VALIDATION_EMAIL:"Formato de email incorrecto",VALIDATION_NUMBER:"Este campo sólo acepta números",VALIDATION_RUT:"Formato del campo no es válido",VALIDATION_PASS_MATCH:"Las contraseñas no coinciden",VALIDATION_TWO_NUMBERS:"Debe tener al menos dos numeros",VALIDATION_START_NUMBERS:"Debe comenzar con un número",VALIDATION_PASSWORD_FORMAT:"Debe tener números, letras mayusculas y minusculas y al menos un caracter especial",LOADING:"Cargando...",ERROR_MODAL_TITLE:"Error",HELPER_MODAL_TITLE:"Ventana de Ayuda.",VALIDATION_MODAL_TITLE:"Ventana de Validación.",SUCCESS_MODAL_TITLE:"Éxito.",SUCCESS_CASE_ENTERED_WITH_NUMBER:"Su caso ha sido ingresado con el número ",ERROR_CASE_ENTERED_WITH_NUMBER:"Su caso no ha podido ser ingresado.",SUCCESS_PROFILE_CHANGE:"Su perfil ha sido modificado correctamente",ERROR_VALIDATION_CODE:"Su codigo es incorrecto.",ERROR_RUT:"Rut incorrecto",SUCCESS_CODE_SENT:"Un código de validación ha sido enviado a su correo electrónico",SUCCESS_USER_VALIDATED:"Su cuenta ha sido validada. Ya puede ingresar a la aplicación"}),angular.module("appenel").value("UTILS_CONFIG",{PAYMENT_TEMPLATE:"<Pagar><banco></banco><tipoPago></tipoPago><monto></monto><fechaVencimiento></fechaVencimiento><fechaEmision></fechaEmision><fechaOnClick></fechaOnClick><codigoBarra></codigoBarra><empresa></empresa><nombre></nombre><rut></rut><mail></mail></Pagar>",PAYMENT_ID_BANK:"4",PAYMENT_ENTERPRISE:"1",PAYMENT_PAYMENTTYPE_1:"UD",PAYMENT_PAYMENTTYPE_2:"DA",CONTACT_PHONE_NUMER:"+56226960000",CONTACT_CODE_BRANCHES:"01",CONTACT_CODE_PAYMENT_PLACES:"02",BLACKOUT_TYPE_PROBLEM_1:"91",BLACKOUT_TYPE_PROBLEM_2:"92",STYLE_IONICLOADING_TEMPLATE:'<img src="img/logos/enel_loading.gif" width="40" class="spinner"/>',IMAGE_ASSET_MODAL_HELP:'<img src="img/help/enel_help.png" alt="help" class="width-full-size" />'}),angular.module("appenel").value("SALESFORCE_CONFIG",{appId:"3MVG93MGy9V8hF9NNz4lFSyFA._i3WssncyfrM_RLGx936vLCL1WRYYuIZS8tK8eYhaqEy0sFq.uBm.xSlo7q",apiVersion:"v33.0",loginURL:"",useProxy:!0,useCordova:!1,oauthCallbackURL:"",proxyURL:"",accessToken:"",refreshToken:"",oauthPlugin:!1,networkPlugin:!1}),angular.module("appenel").value("ENDPOINTS",{SETUP:{TIMEOUT:3e4,TIMEOUT_SESSION:3e4,APP_NAME:"",API_KEY:"",CLIENT_SECRET:"",PREPAID_ACCESS_TOKEN:"",COLIVING_ACCESS_TOKEN:""},ENDPOINTS_SALESFORCE:"https://pceveris-enel-mobile.cs44.force.com/communitytest",ENDPOINTS_BASE_EXTERNAL:"https://pceveris-servicerest.cs44.force.com",ENDPOINTS_GET_CONTACT_ID:"/services/apexrest/GetContactIdAuth/",ENDPOINTS_ASSESTS_LIST:"/services/apexrest/GetSupplyAuth/",ENDPOINTS_ASSEST_DETAIL:"/services/apexrest/DetailSupply/",ENDPOINTS_GET_BILLS:"/services/apexrest/GetTicketAuth/",ENDPOINTS_GET_PAYMENTS:"/services/apexrest/GetPaymentAuth/",ENDPOINTS_ENTER_READING:"/services/apexrest/EnterReadingAuth/",ENDPOINTS_EMERGENCY_LIGHTING_PROBLEM:"/services/apexrest/EmergencyLightingProblemAuth/",ENDPOINTS_EMERGENCY_BLACKOUT:"/services/apexrest/EmergencyLightCutAuth/",ENDPOINTS_EMERGENCY_RISK_ACCIDENT:"/services/apexrest/EmergencyRiskAccidentAuth/",ENDPOINTS_CONSUMPTION:"/services/apexrest/ConsumptionAuth/",ENDPOINTS_SETCONTACT:"/services/apexrest/SetContactAuth/",ENDPOINTS_EDIT_USER:"/services/apexrest/EditUserAuth/",ENDPOINTS_PASSWORD_CHANGE:"/services/apexrest/ChangeOwnPasswordsAuth/",ENDPOINTS_GET_USER_SESSION:"/services/apexrest/GetSessionInfo",ENDPOINTS_BRACNHES:"/services/apexrest/GetBranches",ENDPOINTS_FEATURED:"/services/apexrest/GetFeaturedBranches/",ENDPOINTS_COMMERCIAL_DATA:"/services/apexrest/GetBusinessData",ENDPOINTS_GET_STATES:"/services/apexrest/GetCommunes/",ENDPOINTS_EXTERNAL_EMERGENCY_LIGHTING_PROBLEM:"/services/apexrest/EmergencyLightingProblem/",ENDPOINTS_EXTERNAL_EMERGENCY_RISK_ACCIDENT:"/services/apexrest/EmergencyRiskAccident/",ENDPOINTS_EXTERNAL_EMERGENCY_BLACKOUT:"/services/apexrest/EmergencyLightCut/",ENDPOINTS_EXTERNAL_SETCONTACT:"/services/apexrest/SetContact/",ENDPOINTS_EXTERNAL_SUBJECT:"/services/apexrest/SubjectsType/",ENDPOINTS_BLACKOUT_PROBLEMS_LIST:"/services/apexrest/ProblemsTypeLightCut/",ENDPOINTS_LIGHTING_PROBLEMS_LIST:"/services/apexrest/ProblemsTypeStreetLighting/",ENDPOINTS_RISK_ACCIDENT_PROBLEMS_LIST:"/services/apexrest/ProblemsTypeEmergencyRisk/",ENDPOINTS_EXTERNAL_CHANGE_PASS:"/services/apexrest/ChangeOwnPasswords/",ENDPOINTS_EXTERNAL_CODE_REQUEST:"/services/apexrest/Recoverykey/",ENDPOINTS_EXTERNAL_REGISTRY_USER:"/services/apexrest/RegistryUser/",ENDPOINTS_EXTERNAL_ACTIVATE_ACCOUNT:"/services/apexrest/ActivateAccount",ENDPOINTS_EXTERNAL_SEARCH_CLIENTID:"https://www.enel-digital.cl/numero-cliente",ENDPOINTS_PAYMENT:"https://webpay3g.enel.com/bdp/TraductorPage.aspx",ENDPOINTS_ANALYTICS:"https://www.google-analytics.com/collect"}),angular.module("appenel").value("ANALYTICS_CONFIG",{ID_ANALYTICS:"UA-64690741-2",APP_NAME:"ENEL-CHILE",APP_ID:"ENEL-CHILE"});